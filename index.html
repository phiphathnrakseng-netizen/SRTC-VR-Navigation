<!DOCTYPE html>
<html lang="th">
<head>
Â  <meta charset="UTF-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
Â  <title>SRTC VR Virtual | à¹à¸œà¸™à¸œà¸±à¸‡à¹à¸¥à¸°à¸•à¸¶à¸ 3D</title>
Â  <meta name="theme-color" content="#252525">
Â  <script src="https://cdn.tailwindcss.com"></script>
Â  <script src="https://unpkg.com/lucide@latest"></script>
Â  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
Â  <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
Â  <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.min.js"></script>

Â  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap" rel="stylesheet">

Â  <style>
Â  Â  /* Color Palette (SRTC Theme) */
Â  Â  :root {
Â  Â  Â  --color-primary: #252525; /* Dark Black/Gray for primary elements */
Â  Â  Â  --color-secondary: #FFC300; /* Gold/Yellow for accent */
Â  Â  Â  --color-text-dark: #252525;
Â  Â  Â  --color-text-muted: #6b7280;
Â  Â  Â  --color-background: #ffffff;
Â  Â  Â  --color-light-bg: #f5f5f5;
Â  Â  }

Â  Â  * {Â 
Â  Â  Â  font-family: 'Kanit', sans-serif;
Â  Â  Â  box-sizing: border-box;
Â  Â  }
Â  Â  body {
Â  Â  Â  overflow-x: hidden;
Â  Â  Â  /* Soft, clean background with subtle gradient */
Â  Â  Â  background: linear-gradient(135deg, var(--color-background) 0%, var(--color-light-bg) 100%);
Â  Â  Â  min-height: 100vh;
Â  Â  Â  display: flex;
Â  Â  Â  flex-direction: column;
Â  Â  Â  color: var(--color-text-dark);
Â  Â  }

Â  Â  /* Header & Icon Buttons - Premium Glass */
Â  Â  .icon-button {
Â  Â  Â  position: relative;Â 
Â  Â  Â  padding: 0.6rem; /* Slightly larger padding */
Â  Â  Â  border-radius: 9999px;
Â  Â  Â  display: flex;Â 
Â  Â  Â  align-items: center;Â 
Â  Â  Â  justify-content: center;
Â  Â  Â  color: var(--color-primary);Â 
Â  Â  Â  transition: all 0.3s;
Â  Â  Â  /* Darker, more solid glass effect */
Â  Â  Â  background: rgba(255, 255, 255, 0.7);
Â  Â  Â  backdrop-filter: blur(12px);
Â  Â  Â  border: 1px solid rgba(0, 0, 0, 0.08);
Â  Â  Â  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
Â  Â  }
Â  Â  .icon-button:hover {Â 
Â  Â  Â  transform: translateY(-2px) scale(1.05);Â 
Â  Â  Â  background: rgba(255, 255, 255, 0.9);
Â  Â  Â  box-shadow: 0 8px 20px rgba(0,0,0,0.15);
Â  Â  }
Â  Â  .glass-header {
Â  Â  Â  background: rgba(255, 255, 255, 0.9);
Â  Â  Â  backdrop-filter: blur(20px);
Â  Â  Â  border-bottom: 1px solid rgba(0,0,0,0.1);
Â  Â  Â  box-shadow: 0 5px 25px rgba(0,0,0,0.1);
Â  Â  }
Â  Â  .badge {
Â  Â  Â  /* Use primary color for badges for better contrast */
Â  Â  Â  background: var(--color-primary);Â 
Â  Â  Â  color: #ffffff;
Â  Â  Â  font-size: 0.65rem;Â 
Â  Â  Â  padding: 2px 6px;
Â  Â  Â  font-weight: 600;
Â  Â  }

Â  Â  /* User Profile Buttons (Edit/Logout) */
Â  Â  .user-profile-button {
Â  Â  Â  /* Consistent style with icon-button, but elongated */
Â  Â  Â  background-color: rgba(255, 255, 255, 0.7);
Â  Â  Â  border-radius: 1.5rem;
Â  Â  Â  padding: 0.4rem 0.75rem; /* Larger padding for text */
Â  Â  Â  display: flex;Â 
Â  Â  Â  align-items: center;Â 
Â  Â  Â  color: var(--color-primary);
Â  Â  Â  transition: all 0.3s;
Â  Â  Â  backdrop-filter: blur(12px);
Â  Â  Â  border: 1px solid rgba(0, 0, 0, 0.08);
Â  Â  Â  box-shadow: 0 2px 10px rgba(0,0,0,0.05);
Â  Â  Â  font-weight: 500;
Â  Â  }
Â  Â  .user-profile-button:hover {Â 
Â  Â  Â  transform: scale(1.02);Â 
Â  Â  Â  background-color: rgba(255, 255, 255, 0.9);
Â  Â  }
Â  Â Â 
Â  Â  /* Liquid Glass Design - Enhanced */
Â  Â  .liquid-glass {
Â  Â  Â  background: rgba(255, 255, 255, 0.85); /* More opaque */
Â  Â  Â  backdrop-filter: blur(25px); /* Stronger blur */
Â  Â  Â  border-radius: 1.5rem; /* Slightly larger radius */
Â  Â  Â  border: 1px solid rgba(0, 0, 0, 0.08);
Â  Â  Â  box-shadow:Â 
Â  Â  Â  Â  0 20px 40px rgba(0, 0, 0, 0.15),
Â  Â  Â  Â  inset 0 1px 0 rgba(255, 255, 255, 0.9); /* Stronger inner highlight */
Â  Â  }
Â  Â Â 
Â  Â  .liquid-glass-card {
Â  Â  Â  background: rgba(255, 255, 255, 0.7);
Â  Â  Â  backdrop-filter: blur(30px);
Â  Â  Â  border-radius: 1.25rem;
Â  Â  Â  border: 1px solid rgba(0, 0, 0, 0.05);
Â  Â  Â  box-shadow:Â 
Â  Â  Â  Â  0 12px 35px rgba(0, 0, 0, 0.1),
Â  Â  Â  Â  inset 0 1px 0 rgba(255, 255, 255, 0.9);
Â  Â  Â  transition: all 0.3s ease;
Â  Â  }
Â  Â Â 
Â  Â  .liquid-glass-card:hover {
Â  Â  Â  transform: translateY(-5px);
Â  Â  Â  box-shadow:Â 
Â  Â  Â  Â  0 25px 50px rgba(0, 0, 0, 0.18),
Â  Â  Â  Â  inset 0 1px 0 rgba(255, 255, 255, 1);
Â  Â  Â  background: rgba(255, 255, 255, 0.9);
Â  Â  }

Â  Â  /* CTA Button - Primary Focus */
Â  Â  .cta-button {
Â  Â  Â  /* Solid Dark Color for Primary Action */
Â  Â  Â  background: var(--color-primary);
Â  Â  Â  color: #ffffff;
Â  Â  Â  font-weight: 600;
Â  Â  Â  padding: 0.75rem 1.5rem; /* Larger for better tap target */
Â  Â  Â  border-radius: 9999px;
Â  Â  Â  box-shadow: 0 10px 30px rgba(37, 37, 37, 0.3);
Â  Â  Â  transition: all 0.3s ease;
Â  Â  Â  border: none;
Â  Â  Â  font-size: 1rem;
Â  Â  }
Â  Â  .cta-button:hover {
Â  Â  Â  transform: translateY(-3px);
Â  Â  Â  box-shadow: 0 15px 35px rgba(37, 37, 37, 0.4);
Â  Â  Â  background: #404040;
Â  Â  }

Â  Â  /* Secondary CTA Button (e.g., AR Mode) */
Â  Â  .cta-button-secondary {
Â  Â  Â  background: rgba(255, 255, 255, 0.7);
Â  Â  Â  color: var(--color-primary);
Â  Â  Â  font-weight: 600;
Â  Â  Â  padding: 0.75rem 1.5rem;
Â  Â  Â  border-radius: 9999px;
Â  Â  Â  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
Â  Â  Â  transition: all 0.3s ease;
Â  Â  Â  border: 1px solid rgba(0, 0, 0, 0.1);
Â  Â  Â  font-size: 1rem;
Â  Â  Â  backdrop-filter: blur(10px);
Â  Â  }
Â  Â  .cta-button-secondary:hover {
Â  Â  Â  transform: translateY(-2px);
Â  Â  Â  box-shadow: 0 12px 25px rgba(0, 0, 0, 0.15);
Â  Â  Â  background: rgba(255, 255, 255, 0.9);
Â  Â  }
Â  Â Â 
Â  Â  /* Activity Points Pill */
Â  Â  .points-pill {
Â  Â  Â  background: var(--color-secondary); /* Use gold accent color */
Â  Â  Â  color: var(--color-primary);
Â  Â  Â  font-weight: 700;
Â  Â  Â  padding: 4px 10px;
Â  Â  Â  border-radius: 9999px;
Â  Â  Â  font-size: 0.75rem;
Â  Â  Â  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
Â  Â  }

Â  Â  /* Registration Button (The Profile Icon) */
Â  Â  .registration-button {
Â  Â  Â  background-color: rgba(255, 255, 255, 0.7);
Â  Â  Â  border-radius: 1.5rem;
Â  Â  Â  padding: 0.3rem 0.6rem 0.3rem 0.3rem; /* Adjusted for better look */
Â  Â  Â  border: 1px solid rgba(0, 0, 0, 0.08);
Â  Â  Â  transition: all 0.3s;
Â  Â  }
Â  Â  .registration-button:hover {Â 
Â  Â  Â  transform: scale(1.02);Â 
Â  Â  Â  background-color: rgba(255, 255, 255, 0.9);
Â  Â  }
Â  Â  .registration-button .user-avatar {
Â  Â  Â  border: 1px solid var(--color-secondary); /* Highlight avatar with accent color */
Â  Â  }
Â  Â Â 
Â  Â  /* Form Input Enhancements */
Â  Â  .form-input {
Â  Â  Â  border: 1px solid #d1d5db;
Â  Â  Â  border-radius: 0.75rem; /* Slightly rounder */
Â  Â  Â  padding: 0.75rem; /* Larger padding */
Â  Â  Â  background-color: rgba(255, 255, 255, 0.9);
Â  Â  Â  font-size: 0.9rem;
Â  Â  }
Â  Â  .form-input:focus {
Â  Â  Â  border-color: var(--color-primary);
Â  Â  Â  box-shadow: 0 0 0 3px rgba(37, 37, 37, 0.1);
Â  Â  }
Â  Â Â 
Â  Â  /* Utility classes for text colors */
Â  Â  .text-dark { color: var(--color-text-dark); }
Â  Â  .text-muted { color: var(--color-text-muted); }
Â  Â  .text-accent { color: var(--color-secondary); }
Â  Â Â 
Â  Â  /* Modal Enhancements */
Â  Â  .modal-content {
Â  Â  Â  background: rgba(255, 255, 255, 0.98);
Â  Â  Â  border-radius: 1.5rem;
Â  Â  Â  border: 1px solid rgba(0, 0, 0, 0.05);
Â  Â  }

Â  Â  /* Responsive Adjustments for better UX */
Â  Â  @media (max-width: 640px) {
Â  Â  Â  .icon-button { padding: 0.5rem; }
Â  Â  Â  .user-profile-button span, .registration-button .user-name { display: none !important; } /* Hide text on small screens for cleaner header */
Â  Â  Â  .user-profile-button { padding: 0.5rem; width: 2.5rem; height: 2.5rem; }
Â  Â  Â  .user-profile-button i { margin-right: 0 !important; }
Â  Â  Â  .registration-button { padding: 0.5rem; width: 2.5rem; height: 2.5rem; }
Â  Â  Â  .registration-button .user-avatar { margin-right: 0; }
Â  Â  Â  .cta-button, .cta-button-secondary { font-size: 0.9rem; padding: 0.6rem 1.25rem; }
Â  Â  Â  .features-grid { grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); }
Â  Â  }
Â  </style>
</head>

<body class="text-dark">
Â  Â  <header class="glass-header sticky top-0 z-20">
Â  Â  <div class="flex justify-between items-center px-4 sm:px-6 py-3">
Â  Â  Â  <div class="flex items-center space-x-3">
Â  Â  Â  Â  <img src="https://www.srtc.ac.th/2020/images/images.jpg" class="h-9 w-9 rounded-full ring-2 ring-gray-300 shadow-md" alt="SRTC Logo"/>
Â  Â  Â  Â  <h1 class="text-base sm:text-xl font-extrabold text-dark tracking-tight">SRTC VR <span class="text-accent">|</span> Guide</h1>
Â  Â  Â  </div>

Â  Â  Â  <nav class="flex items-center space-x-2 sm:space-x-3">
Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="openQRModal()" class="icon-button" title="QR Code">
Â  Â  Â  Â  Â  <i data-lucide="qr-code" class="w-5 h-5"></i>
Â  Â  Â  Â  </button>
Â  Â  Â  Â  <button onclick="toggleARMode()" class="icon-button" title="à¹€à¸›à¸´à¸”à¹‚à¸«à¸¡à¸” AR/VR">
Â  Â  Â  Â  Â  <i data-lucide="scan" class="w-5 h-5"></i>
Â  Â  Â  Â  </button>
Â  Â  Â  Â  <button onclick="openNotification()" class="icon-button" title="à¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™">
Â  Â  Â  Â  Â  <i data-lucide="bell" class="w-5 h-5"></i>
Â  Â  Â  Â  Â  <span id="notif-badge" class="badge hidden">1</span>
Â  Â  Â  Â  </button>

Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="openPointsModal()" class="icon-button" title="à¹à¸•à¹‰à¸¡à¸ªà¸°à¸ªà¸¡">
Â  Â  Â  Â  Â  <i data-lucide="coins" class="w-5 h-5 text-accent"></i>
Â  Â  Â  Â  Â  <span id="points-badge" class="badge hidden">0</span>
Â  Â  Â  Â  </button>

Â  Â  Â  Â  Â  Â  Â  Â  <button id="edit-profile-btn" onclick="editProfile()" class="user-profile-button hidden">
Â  Â  Â  Â  Â  <i data-lucide="edit-3" class="w-4 h-4 mr-1"></i>
Â  Â  Â  Â  Â  <span class="text-sm font-medium hidden sm:inline">à¹‚à¸›à¸£à¹„à¸Ÿà¸¥à¹Œ</span>
Â  Â  Â  Â  </button>
Â  Â  Â  Â  <button id="logout-btn-header" onclick="userLogout()" class="user-profile-button hidden !bg-red-500/10 hover:!bg-red-500/20">
Â  Â  Â  Â  Â  <i data-lucide="log-out" class="w-4 h-4 mr-1 text-red-600"></i>
Â  Â  Â  Â  Â  <span class="text-sm font-medium text-red-600 hidden sm:inline">à¸­à¸­à¸</span>
Â  Â  Â  Â  </button>

Â  Â  Â  Â  Â  Â  Â  Â  <button id="registration-btn" onclick="toggleRegistrationMenu()" class="registration-button relative">
Â  Â  Â  Â  Â  <div id="registration-default" class="flex items-center">
Â  Â  Â  Â  Â  Â  <i data-lucide="user-plus" class="w-5 h-5"></i>
Â  Â  Â  Â  Â  Â  <span class="ml-2 text-sm font-medium hidden sm:inline">à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™</span>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div id="registration-user" class="user-info hidden flex items-center gap-1.5">
Â  Â  Â  Â  Â  Â  <img id="user-avatar" class="user-avatar w-6 h-6" />
Â  Â  Â  Â  Â  Â  <span id="user-name" class="user-name text-sm font-semibold mr-1"></span>
Â  Â  Â  Â  Â  Â  <i data-lucide="chevron-down" class="w-3 h-3 hidden sm:inline"></i>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div id="registration-menu" class="registration-menu">
Â  Â  Â  Â  Â  Â  <div class="user-details">
Â  Â  Â  Â  Â  Â  Â  <div id="menu-user-name" class="name"></div>
Â  Â  Â  Â  Â  Â  Â  <div id="menu-user-email" class="email"></div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </button>
Â  Â  Â  </nav>
Â  Â  </div>
Â  </header>

Â  Â  <main class="flex-grow compact-layout px-4 py-6">
Â  Â  Â  Â  <section class="hero-section">
Â  Â  Â  <div class="hero-content">
Â  Â  Â  Â  <h2 class="text-3xl sm:text-5xl font-extrabold mb-4 text-dark leading-tight">
Â  Â  Â  Â  Â  <span class="text-accent">SRTC</span> Virtual <br class="sm:hidden"/> Campus Navigation
Â  Â  Â  Â  </h2>
Â  Â  Â  Â  <p class="text-lg text-muted mb-8 max-w-3xl mx-auto font-medium">à¸ªà¸±à¸¡à¸œà¸±à¸ªà¸›à¸£à¸°à¸ªà¸šà¸à¸²à¸£à¸“à¹Œà¸™à¸³à¸—à¸²à¸‡ **3 à¸¡à¸´à¸•à¸´** à¹à¸¥à¸° **AR** à¸ à¸²à¸¢à¹ƒà¸™à¸§à¸´à¸—à¸¢à¸²à¸¥à¸±à¸¢à¹€à¸—à¸„à¸™à¸´à¸„à¸ªà¸¸à¸£à¸²à¸©à¸à¸£à¹Œà¸˜à¸²à¸™à¸µ</p>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div class="flex flex-col sm:flex-row gap-3 justify-center mb-10">
Â  Â  Â  Â  Â  <button onclick="showMap()" class="cta-button">
Â  Â  Â  Â  Â  Â  <i data-lucide="map" class="w-5 h-5 mr-2"></i>
Â  Â  Â  Â  Â  Â  <span>à¸ªà¸³à¸£à¸§à¸ˆà¹à¸œà¸™à¸œà¸±à¸‡ 3D</span>
Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  <button onclick="toggleARMode()" class="cta-button-secondary">
Â  Â  Â  Â  Â  Â  <i data-lucide="scan" class="w-5 h-5 mr-2"></i>
Â  Â  Â  Â  Â  Â  <span>à¹€à¸›à¸´à¸”à¹‚à¸«à¸¡à¸” AR/VR</span>
Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  </div>
Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  <div class="features-grid">
Â  Â  Â  Â  Â  <div class="liquid-glass-card p-5 text-center">
Â  Â  Â  Â  Â  Â  <i data-lucide="map-pin" class="w-8 h-8 mx-auto mb-2 text-primary"></i>
Â  Â  Â  Â  Â  Â  <h3 class="text-base font-semibold mb-1">à¸™à¸³à¸—à¸²à¸‡à¹€à¸£à¸µà¸¢à¸¥à¹„à¸—à¸¡à¹Œ</h3>
Â  Â  Â  Â  Â  Â  <p class="text-muted text-sm">à¸„à¹‰à¸™à¸«à¸²à¸ªà¸–à¸²à¸™à¸—à¸µà¹ˆà¸ªà¸³à¸„à¸±à¸à¹„à¸”à¹‰à¸­à¸¢à¹ˆà¸²à¸‡à¸£à¸§à¸”à¹€à¸£à¹‡à¸§</p>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  <div class="liquid-glass-card p-5 text-center">
Â  Â  Â  Â  Â  Â  <i data-lucide="box" class="w-8 h-8 mx-auto mb-2 text-primary"></i>
Â  Â  Â  Â  Â  Â  <h3 class="text-base font-semibold mb-1">à¹‚à¸¡à¹€à¸”à¸¥ 3D à¸­à¸²à¸„à¸²à¸£</h3>
Â  Â  Â  Â  Â  Â  <p class="text-muted text-sm">à¸ªà¸³à¸£à¸§à¸ˆà¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡à¹à¸¥à¸°à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸”à¹€à¸ªà¸¡à¸·à¸­à¸™à¸ˆà¸£à¸´à¸‡</p>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  <div class="liquid-glass-card p-5 text-center">
Â  Â  Â  Â  Â  Â  <i data-lucide="camera" class="w-8 h-8 mx-auto mb-2 text-primary"></i>
Â  Â  Â  Â  Â  Â  <h3 class="text-base font-semibold mb-1">Augmented Reality</h3>
Â  Â  Â  Â  Â  Â  <p class="text-muted text-sm">à¸‹à¹‰à¸­à¸™à¸—à¸±à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¸–à¸²à¸™à¸—à¸µà¹ˆà¸šà¸™à¹‚à¸¥à¸à¹à¸«à¹ˆà¸‡à¸„à¸§à¸²à¸¡à¸ˆà¸£à¸´à¸‡</p>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  <div id="activities-section" class="activity-section liquid-glass hidden p-6">
Â  Â  Â  Â  Â  <h2 class="text-2xl font-bold text-center mb-3">à¸à¸´à¸ˆà¸à¸£à¸£à¸¡à¸£à¸±à¸šà¸„à¸°à¹à¸™à¸™à¸à¸´à¹€à¸¨à¸© <i data-lucide="star" class="w-5 h-5 inline text-accent"></i></h2>
Â  Â  Â  Â  Â  <p class="text-muted text-center mb-5 text-base">à¸£à¹ˆà¸§à¸¡à¸—à¸³à¸à¸´à¸ˆà¸à¸£à¸£à¸¡à¹€à¸à¸·à¹ˆà¸­à¸ªà¸°à¸ªà¸¡à¸„à¸°à¹à¸™à¸™à¹à¸¥à¸°à¹à¸¥à¸à¸£à¸±à¸šà¸‚à¸­à¸‡à¸£à¸²à¸‡à¸§à¸±à¸¥</p>
Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  <div class="activity-grid">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="liquid-glass-card activity-card" onclick="toggleActivityDetail('activity-1')">
Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center mb-2">
Â  Â  Â  Â  Â  Â  Â  Â  <i data-lucide="map" class="w-6 h-6 text-primary mr-3"></i>
Â  Â  Â  Â  Â  Â  Â  Â  <h3 class="text-lg font-bold">à¸ªà¸³à¸£à¸§à¸ˆà¹à¸œà¸™à¸—à¸µà¹ˆ 3D</h3>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <p class="text-muted text-sm mb-3">à¸—à¸³à¸„à¸§à¸²à¸¡à¸„à¸¸à¹‰à¸™à¹€à¸„à¸¢à¸à¸±à¸šà¸à¸·à¹‰à¸™à¸—à¸µà¹ˆà¸§à¸´à¸—à¸¢à¸²à¸¥à¸±à¸¢à¸œà¹ˆà¸²à¸™à¸¡à¸¸à¸¡à¸¡à¸­à¸‡ 3 à¸¡à¸´à¸•à¸´</p>
Â  Â  Â  Â  Â  Â  Â  <div class="flex justify-between items-center">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="points-pill">+20 à¸„à¸°à¹à¸™à¸™</span>
Â  Â  Â  Â  Â  Â  Â  Â  <i data-lucide="chevron-down" class="w-4 h-4 text-primary transition-transform" id="chevron-1"></i>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <div class="activity-detail mt-3" id="activity-1">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="border-t border-gray-200 pt-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <h4 class="font-bold mb-2 text-sm">à¸§à¸´à¸˜à¸µà¸à¸²à¸£à¹€à¸‚à¹‰à¸²à¸£à¹ˆà¸§à¸¡:</h4>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <ul class="list-disc list-inside text-muted text-sm space-y-1 mb-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li>à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¹‚à¸«à¸¡à¸”à¹à¸œà¸™à¸œà¸±à¸‡ 3D</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li>à¸«à¸¡à¸¸à¸™à¸”à¸¹à¹à¸¥à¸°à¸‹à¸¹à¸¡à¸­à¸´à¸™à¸­à¸²à¸„à¸²à¸£à¸«à¸¥à¸±à¸à¸­à¸¢à¹ˆà¸²à¸‡à¸™à¹‰à¸­à¸¢ 3 à¸­à¸²à¸„à¸²à¸£</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </ul>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="completeActivity('à¸ªà¸³à¸£à¸§à¸ˆà¹à¸œà¸™à¸—à¸µà¹ˆ 3D', 20)" class="w-full bg-primary text-white py-2 rounded-xl font-semibold hover:bg-gray-700 transition-all text-sm shadow-md">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i data-lucide="zap" class="w-4 h-4 inline mr-1"></i>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  à¸£à¸±à¸šà¸„à¸°à¹à¸™à¸™à¸—à¸±à¸™à¸—à¸µ
Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="liquid-glass-card activity-card" onclick="toggleActivityDetail('activity-2')">
Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center mb-2">
Â  Â  Â  Â  Â  Â  Â  Â  <i data-lucide="scan" class="w-6 h-6 text-primary mr-3"></i>
Â  Â  Â  Â  Â  Â  Â  Â  <h3 class="text-lg font-bold">à¸—à¸”à¸¥à¸­à¸‡à¹ƒà¸Šà¹‰ AR Navigation</h3>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <p class="text-muted text-sm mb-3">à¹€à¸›à¸´à¸”à¹‚à¸«à¸¡à¸” AR à¹à¸¥à¸°à¸ªà¹à¸à¸™ Marker à¸—à¸µà¹ˆà¸à¸³à¸«à¸™à¸”</p>
Â  Â  Â  Â  Â  Â  Â  <div class="flex justify-between items-center">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="points-pill">+30 à¸„à¸°à¹à¸™à¸™</span>
Â  Â  Â  Â  Â  Â  Â  Â  <i data-lucide="chevron-down" class="w-4 h-4 text-primary transition-transform" id="chevron-2"></i>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <div class="activity-detail mt-3" id="activity-2">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="border-t border-gray-200 pt-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <h4 class="font-bold mb-2 text-sm">à¸§à¸´à¸˜à¸µà¸à¸²à¸£à¹€à¸‚à¹‰à¸²à¸£à¹ˆà¸§à¸¡:</h4>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <ul class="list-disc list-inside text-muted text-sm space-y-1 mb-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li>à¹€à¸›à¸´à¸”à¹‚à¸«à¸¡à¸” AR</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <li>à¸ªà¹à¸à¸™à¸›à¹‰à¸²à¸¢ "SRTC AR Marker" à¸šà¸£à¸´à¹€à¸§à¸“à¸­à¸²à¸„à¸²à¸£à¸­à¸³à¸™à¸§à¸¢à¸à¸²à¸£</li>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </ul>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <button onclick="completeActivity('à¸—à¸”à¸¥à¸­à¸‡à¹ƒà¸Šà¹‰ AR', 30)" class="w-full bg-primary text-white py-2 rounded-xl font-semibold hover:bg-gray-700 transition-all text-sm shadow-md">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <i data-lucide="zap" class="w-4 h-4 inline mr-1"></i>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  à¸£à¸±à¸šà¸„à¸°à¹à¸™à¸™à¸—à¸±à¸™à¸—à¸µ
Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  </section>

Â  Â  Â  Â  <section id="registration-section" class="py-6 liquid-glass hidden mt-6">
Â  Â  Â  <div class="max-w-4xl mx-auto px-4">
Â  Â  Â  Â  <h2 class="text-2xl font-bold text-center mb-5">à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™à¸œà¸¹à¹‰à¹ƒà¸Šà¹‰à¸‡à¸²à¸™ <span class="text-accent">SRTC Guide</span></h2>
Â  Â  Â  Â  <div class="registration-form liquid-glass-card p-6">
Â  Â  Â  Â  Â  <form id="registration-form">
Â  Â  Â  Â  Â  Â  <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  <label class="block text-dark mb-1 font-semibold text-sm" for="student-id">à¸£à¸«à¸±à¸ªà¸™à¸±à¸à¸¨à¸¶à¸à¸©à¸²/à¸šà¸¸à¸„à¸¥à¸²à¸à¸£</label>
Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="student-id" class="form-input" placeholder="à¸£à¸°à¸šà¸¸à¸£à¸«à¸±à¸ªà¸›à¸£à¸°à¸ˆà¸³à¸•à¸±à¸§" required>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  <label class="block text-dark mb-1 font-semibold text-sm" for="fullname">à¸Šà¸·à¹ˆà¸­-à¸™à¸²à¸¡à¸ªà¸à¸¸à¸¥</label>
Â  Â  Â  Â  Â  Â  Â  Â  <input type="text" id="fullname" class="form-input" placeholder="à¸Šà¸·à¹ˆà¸­-à¸™à¸²à¸¡à¸ªà¸à¸¸à¸¥" required>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  <div class="mb-3">
Â  Â  Â  Â  Â  Â  Â  <label class="block text-dark mb-1 font-semibold text-sm" for="email">à¸­à¸µà¹€à¸¡à¸¥</label>
Â  Â  Â  Â  Â  Â  Â  <input type="email" id="email" class="form-input" placeholder="à¸­à¸µà¹€à¸¡à¸¥à¸ªà¸³à¸«à¸£à¸±à¸šà¸•à¸´à¸”à¸•à¹ˆà¸­" required>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="mb-5">
Â  Â  Â  Â  Â  Â  Â  <label class="block text-dark mb-2 font-semibold text-sm">à¸­à¸±à¸à¹‚à¸«à¸¥à¸”à¸£à¸¹à¸›à¹‚à¸›à¸£à¹„à¸Ÿà¸¥à¹Œ (à¹„à¸¡à¹ˆà¸šà¸±à¸‡à¸„à¸±à¸š)</label>
Â  Â  Â  Â  Â  Â  Â  <div class="file-upload" id="file-upload-area">
Â  Â  Â  Â  Â  Â  Â  Â  <i data-lucide="upload-cloud" class="w-6 h-6 file-upload-icon"></i>
Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-muted text-sm text-center font-medium">à¸„à¸¥à¸´à¸à¹€à¸à¸·à¹ˆà¸­à¸­à¸±à¸à¹‚à¸«à¸¥à¸”<br>à¸«à¸£à¸·à¸­à¸¥à¸²à¸à¹„à¸Ÿà¸¥à¹Œà¸£à¸¹à¸›à¸ à¸²à¸à¸¡à¸²à¸§à¸²à¸‡</p>
Â  Â  Â  Â  Â  Â  Â  Â  <input type="file" id="file-input" class="hidden" accept="image/*">
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  <div id="file-preview" class="hidden mt-3 text-center">
Â  Â  Â  Â  Â  Â  Â  Â  <img id="preview-image" class="h-16 w-16 rounded-full mx-auto object-cover border-2 border-accent shadow-lg">
Â  Â  Â  Â  Â  Â  Â  Â  <p id="file-name" class="text-center text-xs text-muted mt-1.5"></p>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button type="submit" class="w-full bg-primary text-white py-3 rounded-2xl font-bold hover:bg-gray-700 transition-all text-base shadow-xl">
Â  Â  Â  Â  Â  Â  Â  <i data-lucide="check-circle" class="w-4 h-4 inline mr-1"></i>
Â  Â  Â  Â  Â  Â  Â  à¸¢à¸·à¸™à¸¢à¸±à¸™à¸à¸²à¸£à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™
Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  </form>
Â  Â  Â  Â  </div>
Â  Â  Â  Â Â 
Â  Â  Â  Â  <div class="text-center mt-4">
Â  Â  Â  Â  Â  <button onclick="hideRegistration()" class="cta-button-secondary py-2 px-4 text-sm">
Â  Â  Â  Â  Â  Â  <i data-lucide="x" class="w-4 h-4 inline mr-1"></i>
Â  Â  Â  Â  Â  Â  à¸›à¸´à¸”à¸«à¸™à¹‰à¸²à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™
Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  </section>

Â  Â  Â  Â  <section id="map-section" class="py-6 liquid-glass hidden mt-6">
Â  Â  Â  <div class="max-w-4xl mx-auto px-4">
Â  Â  Â  Â  <h2 class="text-2xl font-bold text-center mb-4">à¹à¸œà¸™à¸œà¸±à¸‡à¸­à¸²à¸„à¸²à¸£ 3D <span class="text-accent">Virtual Campus</span></h2>
Â  Â  Â  Â  <div id="aframe-container" class="w-full h-80 rounded-2xl overflow-hidden shadow-2xl border border-gray-200">
Â  Â  Â  Â  Â  <a-scene embedded>
Â  Â  Â  Â  Â  Â  <a-box position="0 0.5 -3" rotation="0 45 0" color="#333333" shadow></a-box>
Â  Â  Â  Â  Â  Â  <a-sphere position="2 1 -5" radius="1.25" color="#FFC300" shadow></a-sphere>
Â  Â  Â  Â  Â  Â  <a-cylinder position="-1 0.75 -3" radius="0.5" height="1.5" color="#555555" shadow></a-cylinder>
Â  Â  Â  Â  Â  Â  <a-plane position="0 0 -4" rotation="-90 0 0" width="10" height="10" color="#e0e0e0" shadow></a-plane>
Â  Â  Â  Â  Â  Â  <a-sky color="#f9f9f9"></a-sky>
Â  Â  Â  Â  Â  Â  <a-light type="ambient" color="#fff" intensity="0.5"></a-light>
Â  Â  Â  Â  Â  Â  <a-light type="directional" color="#fff" intensity="0.8" position="5 10 10"></a-light>
Â  Â  Â  Â  Â  </a-scene>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="text-center mt-4">
Â  Â  Â  Â  Â  <button onclick="hideMap()" class="cta-button-secondary py-2 px-4 text-sm">
Â  Â  Â  Â  Â  Â  <i data-lucide="x" class="w-4 h-4 inline mr-1"></i>
Â  Â  Â  Â  Â  Â  à¸›à¸´à¸”à¹à¸œà¸™à¸—à¸µà¹ˆ 3D
Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  </section>
Â  </main>

Â  Â  <footer class="footer">
Â  Â  <div class="container mx-auto">
Â  Â  Â  <p class="text-dark text-xs font-semibold">Â© 2025 SRTC Virtual Campus | All rights reserved.</p>
Â  Â  Â  <p class="text-xs text-muted mt-0.5">à¸§à¸´à¸—à¸¢à¸²à¸¥à¸±à¸¢à¹€à¸—à¸„à¸™à¸´à¸„à¸ªà¸¸à¸£à¸²à¸©à¸à¸£à¹Œà¸˜à¸²à¸™à¸µ - à¸™à¸§à¸±à¸•à¸à¸£à¸£à¸¡à¸™à¸³à¸—à¸²à¸‡à¹€à¸à¸·à¹ˆà¸­à¸™à¸±à¸à¹€à¸£à¸µà¸¢à¸™à¹à¸¥à¸°à¸šà¸¸à¸„à¸¥à¸²à¸à¸£</p>
Â  Â  </div>
Â  </footer>

Â  Â  <div id="qr-modal" class="modal">
Â  Â  <div class="modal-content max-w-xs p-5">
Â  Â  Â  <button onclick="closeQRModal()" class="absolute top-3 right-3 text-gray-500 hover:text-primary">
Â  Â  Â  Â  <i data-lucide="x" class="w-5 h-5"></i>
Â  Â  Â  </button>
Â  Â  Â  <h3 class="font-bold text-xl mb-3">à¸ªà¹à¸à¸™ QR Code</h3>
Â  Â  Â  <div id="qrcode" class="mx-auto mb-3 p-2 bg-white rounded-lg border border-gray-200"></div>
Â  Â  Â  <p class="text-sm text-muted">à¸ªà¹à¸à¸™à¹€à¸à¸·à¹ˆà¸­à¹€à¸‚à¹‰à¸²à¸ªà¸¹à¹ˆà¸£à¸°à¸šà¸šà¸™à¸³à¸—à¸²à¸‡ AR/VR à¹„à¸”à¹‰à¸—à¸±à¸™à¸—à¸µ</p>
Â  Â  </div>
Â  </div>

Â  <div id="points-modal" class="modal">
Â  Â  <div class="modal-content points-modal p-5">
Â  Â  Â  <button onclick="closePointsModal()" class="absolute top-3 right-3 text-gray-500 hover:text-primary">
Â  Â  Â  Â  <i data-lucide="x" class="w-5 h-5"></i>
Â  Â  Â  </button>
Â  Â  Â  <h3 class="font-bold text-xl mb-3 flex items-center justify-center">
Â  Â  Â  Â  <i data-lucide="star" class="w-5 h-5 text-accent mr-2"></i> à¸„à¸°à¹à¸™à¸™à¸ªà¸°à¸ªà¸¡
Â  Â  Â  </h3>
Â  Â  Â  <div id="points-list" class="max-h-60 overflow-y-auto mb-3">
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  <div class="mt-4 pt-3 border-t border-gray-300">
Â  Â  Â  Â  <div class="flex justify-between items-center">
Â  Â  Â  Â  Â  <span class="font-bold text-lg">à¸„à¸°à¹à¸™à¸™à¸£à¸§à¸¡à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”</span>
Â  Â  Â  Â  Â  <span id="total-points" class="font-extrabold text-2xl text-primary">0</span>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  Â  </div>
Â  </div>

Â  Â  <div id="webcam-error-modal" class="webcam-error">
Â  Â  <div class="webcam-error-content p-6">
Â  Â  Â  <i data-lucide="alert-triangle" class="w-8 h-8 text-red-500 mx-auto mb-3"></i>
Â  Â  Â  <h3>à¹„à¸¡à¹ˆà¸ªà¸²à¸¡à¸²à¸£à¸–à¹€à¸‚à¹‰à¸²à¸–à¸¶à¸‡à¸à¸¥à¹‰à¸­à¸‡à¹„à¸”à¹‰</h3>
Â  Â  Â  <p>à¹‚à¸›à¸£à¸”à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸§à¹ˆà¸²à¸„à¸¸à¸“à¹„à¸”à¹‰à¹ƒà¸«à¹‰à¸ªà¸´à¸—à¸˜à¸´à¹Œà¸à¸²à¸£à¹€à¸‚à¹‰à¸²à¸–à¸¶à¸‡à¸à¸¥à¹‰à¸­à¸‡à¸ªà¸³à¸«à¸£à¸±à¸šà¹€à¸§à¹‡à¸šà¹„à¸‹à¸•à¹Œà¸™à¸µà¹‰ à¹€à¸à¸·à¹ˆà¸­à¹ƒà¸Šà¹‰à¸‡à¸²à¸™à¹‚à¸«à¸¡à¸” AR/VR</p>
Â  Â  Â  <button onclick="closeWebcamError()" class="bg-primary text-white py-2 px-6 rounded-lg font-semibold mt-2 hover:bg-gray-700 transition-all">
Â  Â  Â  Â  à¸•à¸à¸¥à¸‡
Â  Â  Â  </button>
Â  Â  </div>
Â  </div>

Â  Â  <div id="ar-view">
Â  Â  Â  Â  <a-scene embedded
Â  Â  Â  vr-mode-ui="enabled: false"
Â  Â  Â  arjs="sourceType: webcam; detectionMode: mono; cameraParametersUrl: https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/camera-parameters.patt;"
Â  Â  Â  id="ar-scene">
Â  Â  Â Â 
Â  Â  Â  <a-marker preset="hiro" id="ar-marker">
Â  Â  Â  Â  Â  Â  Â  Â  <a-torus-knot radius="0.5" tube="0.2" p="2" q="3" color="#FFC300" material="shader: standard; metalness: 0.9; roughness: 0.05;" rotation="0 0 0" animation="property: rotation; to: 360 360 0; loop: true; dur: 3000; easing: linear;"></a-torus-knot>
Â  Â  Â  </a-marker>
Â  Â  Â Â 
Â  Â  Â  <a-entity camera></a-entity>
Â  Â  </a-scene>
Â  Â Â 
Â  Â  Â  Â  <div class="absolute top-0 left-0 right-0 p-3 flex justify-between items-start z-50">
Â  Â  Â  <button onclick="exitARMode()" class="bg-primary text-white px-4 py-2 rounded-full text-sm font-semibold shadow-xl">
Â  Â  Â  Â  <i data-lucide="x" class="w-4 h-4 inline mr-1"></i>
Â  Â  Â  Â  à¸­à¸­à¸à¸ˆà¸²à¸ AR
Â  Â  Â  </button>
Â  Â  </div>
Â  </div>


Â  <script>
Â  Â  // JavaScript Functions (Unchanged logic, ensures features work with new UI)
Â  Â  
Â  Â  document.addEventListener('DOMContentLoaded', () => {
Â  Â  Â  lucide.createIcons();
Â  Â  Â  // Example initial login state
Â  Â  Â  updateRegistrationStatus(true, 'à¸ªà¸¡à¸Šà¸²à¸¢ à¹€à¸à¹ˆà¸‡à¸¡à¸²à¸', 'somchai.k@srtc.ac.th', 'https://via.placeholder.com/150/FFC300/252525?text=SK');
Â  Â  });

Â  Â  // Global State (Dummy)
Â  Â  let isUserLoggedIn = false;
Â  Â  let userPoints = 0;
Â  Â  let userActivities = [];

Â  Â  // Helper to update registration buttons (Crucial for the user request)
Â  Â  function updateRegistrationStatus(isLoggedIn, userName = '', userEmail = '', userAvatar = '') {
Â  Â  Â  const regDefault = document.getElementById('registration-default');
Â  Â  Â  const regUser = document.getElementById('registration-user');
Â  Â  Â  const editBtn = document.getElementById('edit-profile-btn');
Â  Â  Â  const logoutBtn = document.getElementById('logout-btn-header');
Â  Â  Â  const activitiesSection = document.getElementById('activities-section');
Â  Â  Â  const nameDisplay = userName.split(' ')[0]; // Use first name for compact display

Â  Â  Â  isUserLoggedIn = isLoggedIn;

Â  Â  Â  if (isLoggedIn) {
Â  Â  Â  Â  regDefault.classList.add('hidden');
Â  Â  Â  Â  regUser.classList.remove('hidden');
Â  Â  Â  Â  
Â  Â  Â  Â  // ğŸš© à¹à¸ªà¸”à¸‡à¸›à¸¸à¹ˆà¸¡à¸—à¸µà¹ˆà¸¢à¹‰à¸²à¸¢à¸¡à¸²à¹ƒà¸«à¸¡à¹ˆ
Â  Â  Â  Â  editBtn.classList.remove('hidden'); 
Â  Â  Â  Â  logoutBtn.classList.remove('hidden');

Â  Â  Â  Â  // à¸­à¸±à¸›à¹€à¸”à¸•à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹ƒà¸™à¸›à¸¸à¹ˆà¸¡à¸«à¸¥à¸±à¸à¹à¸¥à¸°à¹€à¸¡à¸™à¸¹à¸¢à¹ˆà¸­à¸¢
Â  Â  Â  Â  document.getElementById('user-name').textContent = nameDisplay;
Â  Â  Â  Â  document.getElementById('user-avatar').src = userAvatar;
Â  Â  Â  Â  document.getElementById('menu-user-name').textContent = userName;
Â  Â  Â  Â  document.getElementById('menu-user-email').textContent = userEmail;

Â  Â  Â  Â  // à¹à¸ªà¸”à¸‡à¸ªà¹ˆà¸§à¸™à¸à¸´à¸ˆà¸à¸£à¸£à¸¡
Â  Â  Â  Â  activitiesSection.classList.remove('hidden');

Â  Â  Â  } else {
Â  Â  Â  Â  regDefault.classList.remove('hidden');
Â  Â  Â  Â  regUser.classList.add('hidden');
Â  Â  Â  Â  
Â  Â  Â  Â  // ğŸš© à¸‹à¹ˆà¸­à¸™à¸›à¸¸à¹ˆà¸¡à¸—à¸µà¹ˆà¸¢à¹‰à¸²à¸¢à¸¡à¸²à¹ƒà¸«à¸¡à¹ˆ
Â  Â  Â  Â  editBtn.classList.add('hidden');
Â  Â  Â  Â  logoutBtn.classList.add('hidden');

Â  Â  Â  Â  // à¸‹à¹ˆà¸­à¸™à¸ªà¹ˆà¸§à¸™à¸à¸´à¸ˆà¸à¸£à¸£à¸¡
Â  Â  Â  Â  activitiesSection.classList.add('hidden');

Â  Â  Â  Â  // à¸›à¸´à¸”à¹€à¸¡à¸™à¸¹à¸¢à¹ˆà¸­à¸¢à¸–à¹‰à¸²à¹€à¸›à¸´à¸”à¸­à¸¢à¸¹à¹ˆ
Â  Â  Â  Â  document.getElementById('registration-menu').classList.remove('show');
Â  Â  Â  Â  
Â  Â  Â  Â  // à¸‹à¹ˆà¸­à¸™à¸«à¸™à¹‰à¸²à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™/à¹à¸œà¸™à¸—à¸µà¹ˆ à¸–à¹‰à¸²à¹€à¸›à¸´à¸”à¸­à¸¢à¸¹à¹ˆ
Â  Â  Â  Â  hideRegistration();
Â  Â  Â  Â  hideMap();
Â  Â  Â  }
Â  Â  }

Â  Â  function toggleRegistrationMenu() {
Â  Â  Â  const menu = document.getElementById('registration-menu');
Â  Â  Â  if (!isUserLoggedIn) {
Â  Â  Â  Â  showRegistration();
Â  Â  Â  Â  return;
Â  Â  Â  }
Â  Â  Â  menu.classList.toggle('show');
Â  Â  }

Â  Â  function userLogout() {
Â  Â  Â  if (confirm('à¸„à¸¸à¸“à¸•à¹‰à¸­à¸‡à¸à¸²à¸£à¸­à¸­à¸à¸ˆà¸²à¸à¸£à¸°à¸šà¸šà¸«à¸£à¸·à¸­à¹„à¸¡à¹ˆ?')) {
Â  Â  Â  Â  alert('à¸­à¸­à¸à¸ˆà¸²à¸à¸£à¸°à¸šà¸šà¹à¸¥à¹‰à¸§!');
Â  Â  Â  Â  updateRegistrationStatus(false);
Â  Â  Â  }
Â  Â  }

Â  Â  function editProfile() {
Â  Â  Â  alert('à¹€à¸›à¸´à¸”à¸«à¸™à¹‰à¸²à¹à¸à¹‰à¹„à¸‚à¹‚à¸›à¸£à¹„à¸Ÿà¸¥à¹Œ (à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¸à¸±à¸’à¸™à¸²)');
Â  Â  Â  document.getElementById('registration-menu').classList.remove('show');
Â  Â  }
Â  Â  
Â  Â  function showRegistration() {
Â  Â  Â  document.getElementById('registration-section').classList.remove('hidden');
Â  Â  Â  document.getElementById('map-section').classList.add('hidden');
Â  Â  }
Â  Â  
Â  Â  function hideRegistration() {
Â  Â  Â  document.getElementById('registration-section').classList.add('hidden');
Â  Â  }

Â  Â  function showMap() {
Â  Â  Â  document.getElementById('map-section').classList.remove('hidden');
Â  Â  Â  document.getElementById('registration-section').classList.add('hidden');
Â  Â  }

Â  Â  function hideMap() {
Â  Â  Â  document.getElementById('map-section').classList.add('hidden');
Â  Â  }

Â  Â  function openQRModal() {
Â  Â  Â  const modal = document.getElementById('qr-modal');
Â  Â  Â  modal.classList.add('show');
Â  Â  Â  
Â  Â  Â  const qrDiv = document.getElementById('qrcode');
Â  Â  Â  if (qrDiv.innerHTML === '') {
Â  Â  Â  Â  new QRCode(qrDiv, {
Â  Â  Â  Â  Â  text: window.location.href,
Â  Â  Â  Â  Â  width: 150, // Larger QR Code
Â  Â  Â  Â  Â  height: 150,
Â  Â  Â  Â  Â  colorDark : "#252525",
Â  Â  Â  Â  Â  colorLight : "#ffffff",
Â  Â  Â  Â  Â  correctLevel : QRCode.CorrectLevel.H
Â  Â  Â  Â  });
Â  Â  Â  }
Â  Â  }

Â  Â  function closeQRModal() {
Â  Â  Â  document.getElementById('qr-modal').classList.remove('show');
Â  Â  }

Â  Â  function openPointsModal() {
Â  Â  Â  if (!isUserLoggedIn) {
Â  Â  Â  Â  alert('à¸à¸£à¸¸à¸“à¸²à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™à¸à¹ˆà¸­à¸™à¸”à¸¹à¸„à¸°à¹à¸™à¸™à¸ªà¸°à¸ªà¸¡');
Â  Â  Â  Â  showRegistration();
Â  Â  Â  Â  return;
Â  Â  Â  }

Â  Â  Â  // Ensure initial points are set if logged in but no activity
Â  Â  Â  if (userActivities.length === 0) {
Â  Â  Â  Â  userActivities.push({ name: 'à¸„à¸°à¹à¸™à¸™à¹€à¸£à¸´à¹ˆà¸¡à¸•à¹‰à¸™à¸•à¹‰à¸­à¸™à¸£à¸±à¸š', points: 5 });
Â  Â  Â  Â  userPoints = 5;
Â  Â  Â  }

Â  Â  Â  const list = document.getElementById('points-list');
Â  Â  Â  list.innerHTML = '';
Â  Â  Â  userActivities.forEach(activity => {
Â  Â  Â  Â  const item = document.createElement('div');
Â  Â  Â  Â  item.className = 'points-item text-sm bg-gray-50/50 rounded-lg p-2 mb-1 shadow-sm border border-gray-100';
Â  Â  Â  Â  item.innerHTML = `
Â  Â  Â  Â  Â  <span>${activity.name}</span>
Â  Â  Â  Â  Â  <span class="font-bold text-base text-primary">+${activity.points}</span>
Â  Â  Â  Â  `;
Â  Â  Â  Â  list.appendChild(item);
Â  Â  Â  });

Â  Â  Â  document.getElementById('total-points').textContent = userPoints;
Â  Â  Â  document.getElementById('points-modal').classList.add('show');
Â  Â  }

Â  Â  function closePointsModal() {
Â  Â  Â  document.getElementById('points-modal').classList.remove('show');
Â  Â  }

Â  Â  function openNotification() {
Â  Â  Â  alert('à¹€à¸›à¸´à¸”à¸«à¸™à¹‰à¸²à¹à¸ˆà¹‰à¸‡à¹€à¸•à¸·à¸­à¸™ (à¸Ÿà¸±à¸‡à¸à¹Œà¸Šà¸±à¸™à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¹„à¸”à¹‰à¸à¸±à¸’à¸™à¸²)');
Â  Â  Â  document.getElementById('notif-badge').classList.add('hidden');
Â  Â  }

Â  Â  function toggleActivityDetail(id) {
Â  Â  Â  const detail = document.getElementById(id);
Â  Â  Â  const chevron = document.getElementById(`chevron-${id.split('-')[1]}`);
Â  Â  Â  
Â  Â  Â  // Close others
Â  Â  Â  document.querySelectorAll('.activity-detail.expanded').forEach(d => {
Â  Â  Â  Â  if (d.id !== id) {
Â  Â  Â  Â  Â  d.classList.remove('expanded');
Â  Â  Â  Â  Â  document.getElementById(`chevron-${d.id.split('-')[1]}`).classList.remove('rotate-180');
Â  Â  Â  Â  }
Â  Â  Â  });
Â  Â  Â  
Â  Â  Â  detail.classList.toggle('expanded');
Â  Â  Â  chevron.classList.toggle('rotate-180');
Â  Â  }

Â  Â  function completeActivity(name, points) {
Â  Â  Â  if (!isUserLoggedIn) {
Â  Â  Â  Â  alert('à¸à¸£à¸¸à¸“à¸²à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™à¸à¹ˆà¸­à¸™à¹€à¸‚à¹‰à¸²à¸£à¹ˆà¸§à¸¡à¸à¸´à¸ˆà¸à¸£à¸£à¸¡');
Â  Â  Â  Â  showRegistration();
Â  Â  Â  Â  return;
Â  Â  Â  }
Â  Â  Â  
Â  Â  Â  if (userActivities.some(activity => activity.name === name)) {
Â  Â  Â  Â  alert(`à¸„à¸¸à¸“à¹„à¸”à¹‰à¸—à¸³à¸à¸´à¸ˆà¸à¸£à¸£à¸¡ "${name}" à¹„à¸›à¹à¸¥à¹‰à¸§`);
Â  Â  Â  Â  return;
Â  Â  Â  }

Â  Â  Â  userPoints += points;
Â  Â  Â  userActivities.push({ name, points });
Â  Â  Â  
Â  Â  Â  document.getElementById('points-badge').textContent = userPoints;
Â  Â  Â  document.getElementById('points-badge').classList.remove('hidden');
Â  Â  Â  
Â  Â  Â  alert(`à¸¢à¸´à¸™à¸”à¸µà¸”à¹‰à¸§à¸¢! à¸„à¸¸à¸“à¹„à¸”à¹‰à¸£à¸±à¸š +${points} à¸„à¸°à¹à¸™à¸™à¸ˆà¸²à¸à¸à¸´à¸ˆà¸à¸£à¸£à¸¡ "${name}"`);
Â  Â  }
Â  Â  
Â  Â  function showWebcamError() {
Â  Â  Â  document.getElementById('webcam-error-modal').classList.add('show');
Â  Â  }

Â  Â  function closeWebcamError() {
Â  Â  Â  document.getElementById('webcam-error-modal').classList.remove('show');
Â  Â  }

Â  Â  function toggleARMode() {
Â  Â  Â  const arView = document.getElementById('ar-view');
Â  Â  Â  if (arView.style.display === 'flex') {
Â  Â  Â  Â  exitARMode();
Â  Â  Â  } else {
Â  Â  Â  Â  enterARMode();
Â  Â  Â  }
Â  Â  }

Â  Â  function enterARMode() {
Â  Â  Â  // Simplified AR entry for this example
Â  Â  Â  if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
Â  Â  Â  Â  showWebcamError();
Â  Â  Â  Â  return;
Â  Â  Â  }

Â  Â  Â  navigator.mediaDevices.getUserMedia({ video: true })
Â  Â  Â  Â  .then(stream => {
Â  Â  Â  Â  Â  stream.getTracks().forEach(track => track.stop());

Â  Â  Â  Â  Â  // Hide main content
Â  Â  Â  Â  Â  document.querySelector('header').style.display = 'none';
Â  Â  Â  Â  Â  document.querySelector('main').style.display = 'none';
Â  Â  Â  Â  Â  document.querySelector('footer').style.display = 'none';

Â  Â  Â  Â  Â  document.getElementById('ar-view').style.display = 'flex';
Â  Â  Â  Â  })
Â  Â  Â  Â  .catch(err => {
Â  Â  Â  Â  Â  console.error("Error accessing camera: ", err);
Â  Â  Â  Â  Â  showWebcamError();
Â  Â  Â  Â  });
Â  Â  }

Â  Â  function exitARMode() {
Â  Â  Â  document.getElementById('ar-view').style.display = 'none';
Â  Â  Â  document.querySelector('header').style.display = 'block';
Â  Â  Â  document.querySelector('main').style.display = 'block';
Â  Â  Â  document.querySelector('footer').style.display = 'block';
Â  Â  }

Â  Â  // File Upload
Â  Â  document.getElementById('file-upload-area').addEventListener('click', () => {
Â  Â  Â  document.getElementById('file-input').click();
Â  Â  });

Â  Â  document.getElementById('file-input').addEventListener('change', (event) => {
Â  Â  Â  const file = event.target.files[0];
Â  Â  Â  const preview = document.getElementById('file-preview');
Â  Â  Â  const image = document.getElementById('preview-image');
Â  Â  Â  const fileName = document.getElementById('file-name');

Â  Â  Â  if (file) {
Â  Â  Â  Â  const reader = new FileReader();
Â  Â  Â  Â  reader.onload = (e) => {
Â  Â  Â  Â  Â  image.src = e.target.result;
Â  Â  Â  Â  Â  fileName.textContent = file.name;
Â  Â  Â  Â  Â  preview.classList.remove('hidden');
Â  Â  Â  Â  Â  document.getElementById('file-upload-area').classList.add('hidden');
Â  Â  Â  Â  };
Â  Â  Â  Â  reader.readAsDataURL(file);
Â  Â  Â  } else {
Â  Â  Â  Â  preview.classList.add('hidden');
Â  Â  Â  Â  document.getElementById('file-upload-area').classList.remove('hidden');
Â  Â  Â  }
Â  Â  });

Â  Â  // Registration Form Submission (Dummy)
Â  Â  document.getElementById('registration-form').addEventListener('submit', (e) => {
Â  Â  Â  e.preventDefault();
Â  Â  Â  
Â  Â  Â  const fullname = document.getElementById('fullname').value;
Â  Â  Â  const email = document.getElementById('email').value;
Â  Â  Â  
Â  Â  Â  alert(`à¸¥à¸‡à¸—à¸°à¹€à¸šà¸µà¸¢à¸™à¸ªà¸³à¹€à¸£à¹‡à¸ˆ! à¸¢à¸´à¸™à¸”à¸µà¸•à¹‰à¸­à¸™à¸£à¸±à¸š ${fullname}`);
Â  Â  Â  
Â  Â  Â  updateRegistrationStatus(true, fullname, email, 'https://via.placeholder.com/150/FFC300/252525?text=' + fullname.substring(0, 1) + fullname.split(' ')[1].substring(0, 1));
Â  Â  Â  
Â  Â  Â  hideRegistration();
Â  Â  Â  
Â  Â  Â  e.target.reset();
Â  Â  Â  document.getElementById('file-preview').classList.add('hidden');
Â  Â  Â  document.getElementById('file-upload-area').classList.remove('hidden');
Â  Â  });
Â  </script>
</body>
</html>
