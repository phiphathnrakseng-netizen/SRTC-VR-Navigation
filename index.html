<!DOCTYPE html>
<html lang="th">
<head>
┬а ┬а <meta charset="UTF-8">
┬а ┬а <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
┬а ┬а <title>SRTC VR Virtual | р╣Бр╕Ьр╕Щр╕Ьр╕▒р╕Зр╣Бр╕ер╕░р╕Хр╕╢р╕Б 3D</title>
┬а ┬а┬а
┬а ┬а <meta name="apple-mobile-web-app-capable" content="yes">
┬а ┬а <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
┬а ┬а <meta name="theme-color" content="#4f46e5">┬а
┬а ┬а┬а
┬а ┬а <link rel="manifest" href="/manifest.json">
┬а ┬а┬а
┬а ┬а <link rel="apple-touch-icon" href="/assets/icons/icon-192x192.png">
┬а ┬а┬а
┬а ┬а <script src="https://cdn.tailwindcss.com"></script>
┬а ┬а <script src="https://unpkg.com/lucide@latest"></script>
┬а ┬а <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode.js/1.0.0/qrcode.min.js"></script>
┬а ┬а┬а
┬а ┬а <script src="https://cdnjs.cloudflare.com/ajax/libs/aframe/1.4.2/aframe.min.js"></script>

┬а ┬а <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600;700&display=swap" rel="stylesheet">
┬а ┬а <style>
┬а ┬а ┬а ┬а /* р╕Бр╕│р╕лр╕Щр╕Фр╕Яр╕нр╕Щр╕Хр╣Мр╕лр╕ер╕▒р╕Бр╣Гр╕лр╣Йр╣Ар╕Ыр╣Зр╕Щ Kanit */
┬а ┬а ┬а ┬а * {
┬а ┬а ┬а ┬а ┬а ┬а font-family: 'Kanit', sans-serif;
┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а /* р╕Чр╕│р╣Гр╕лр╣Й html р╣Бр╕ер╕░ body р╕кр╕╣р╕Зр╣Ар╕Хр╣Зр╕бр╕Ир╕нр╣Бр╕ер╕░р╣Др╕бр╣Ир╕бр╕╡ margin/padding р╕Чр╕╡р╣Ир╣Ар╕Ър╕гр╕▓р╕зр╣Мр╣Ар╕Лр╕нр╕гр╣Мр╕Хр╕▒р╣Йр╕Зр╕бр╕▓ */
┬а ┬а ┬а ┬а html, body {
┬а ┬а ┬а ┬а ┬а ┬а height: 100%;
┬а ┬а ┬а ┬а ┬а ┬а width: 100%;
┬а ┬а ┬а ┬а ┬а ┬а margin: 0;
┬а ┬а ┬а ┬а ┬а ┬а padding: 0;
┬а ┬а ┬а ┬а ┬а ┬а overflow-x: hidden; /* р╕Ыр╣Йр╕нр╕Зр╕Бр╕▒р╕Щр╕Бр╕▓р╕гр╣Ар╕ер╕╖р╣Ир╕нр╕Щр╣Бр╕Щр╕зр╕Щр╕нр╕Щ */
┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а /* р╕Бр╕│р╕лр╕Щр╕Фр╣Гр╕лр╣Й A-Frame scene р╣Ар╕Хр╣Зр╕бр╕Юр╕╖р╣Йр╕Щр╕Чр╕╡р╣Ир╣Гр╕Щ modal */
┬а ┬а ┬а ┬а #aframe-scene-container {
┬а ┬а ┬а ┬а ┬а ┬а width: 100%;
┬а ┬а ┬а ┬а ┬а ┬а height: 450px;┬а
┬а ┬а ┬а ┬а ┬а ┬а background-color: #f0f0f0;┬а
┬а ┬а ┬а ┬а ┬а ┬а border-radius: 1.5rem; /* rounded-3xl */
┬а ┬а ┬а ┬а ┬а ┬а overflow: hidden;
┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а /* р╕Ыр╕гр╕▒р╕Ър╕Ыр╕гр╕╕р╕Зр╕Др╕зр╕▓р╕бр╣Вр╕Др╣Йр╕Зр╕бр╕Щр╕Чр╕▒р╣Ир╕зр╣Др╕Ыр╕Чр╕╡р╣Ир╣Гр╕Кр╣Йр╕Ър╣Ир╕нр╕в */
┬а ┬а ┬а ┬а .rounded-3xl {
┬а ┬а ┬а ┬а ┬а ┬а border-radius: 1.5rem; /* 24px */
┬а ┬а ┬а ┬а }
┬а ┬а </style>
</head>
<body class="bg-gray-100 antialiased flex flex-col min-h-screen">
<div id="main-content" class="flex flex-col flex-grow">
┬а ┬а <header class="bg-white shadow-xl sticky top-0 z-20 border-b border-indigo-100">
┬а ┬а ┬а ┬а <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 sm:py-4 flex justify-between items-center">
┬а ┬а ┬а ┬а ┬а ┬а <div class="flex items-center space-x-3">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <img src="https://www.srtc.ac.th/2020/images/images.jpg" alt="р╕Хр╕гр╕▓р╕зр╕┤р╕Чр╕вр╕▓р╕ер╕▒р╕вр╣Ар╕Чр╕Др╕Щр╕┤р╕Др╕кр╕╕р╕гр╕▓р╕йр╕Ор╕гр╣Мр╕Шр╕▓р╕Щр╕╡" class="h-10 w-10 sm:h-12 sm:w-12 rounded-full ring-2 ring-indigo-500 p-[2px]">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <h1 class="text-xl sm:text-2xl font-bold text-gray-900 tracking-wide">SRTC VR Navigation</h1>
┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а <nav class="space-x-2 sm:space-x-4 flex items-center">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <a href="#home" onclick="showSection('home-section')" class="text-indigo-600 bg-indigo-50 font-bold transition duration-150 hidden lg:inline-block py-2 px-3 rounded-xl" id="nav-home">р╕лр╕Щр╣Йр╕▓р╣Бр╕гр╕Б</a>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <a href="#map" onclick="showSection('map-section')" class="text-gray-700 hover:text-indigo-600 transition duration-150 hidden lg:inline-block font-semibold py-2 px-3 rounded-xl" id="nav-map">р╣Бр╕Ьр╕Щр╕Ьр╕▒р╕З</a>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <button id="pwa-install-button" onclick="promptPWAInstall()" class="hidden bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-3 sm:px-4 rounded-3xl shadow-lg flex items-center space-x-2 transform transition duration-200 hover:scale-105 ring-1 ring-purple-300">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <i data-lucide="download" class="w-4 h-4 sm:w-5 sm:h-5"></i>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span class="text-xs sm:text-sm hidden sm:inline">р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕З PWA</span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </button>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <button onclick="showModal('install-qr-modal')" class="bg-yellow-500 hover:bg-yellow-600 text-gray-900 font-semibold py-2 px-3 sm:px-4 rounded-3xl shadow-lg flex items-center space-x-2 transform transition duration-200 hover:scale-105 ring-1 ring-yellow-300">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <i data-lucide="qr-code" class="w-4 h-4 sm:w-5 sm:h-5"></i>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span class="text-xs sm:text-sm hidden sm:inline">QR Code</span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </button>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <button onclick="toggleVRMode()" class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-3 sm:px-4 rounded-3xl shadow-lg flex items-center space-x-2 transform transition duration-200 hover:scale-105 ring-1 ring-indigo-300">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <i data-lucide="scan" class="w-4 h-4 sm:w-5 sm:h-5"></i>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span class="text-xs sm:text-sm">VR (AR)</span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </button>
┬а ┬а ┬а ┬а ┬а ┬а </nav>
┬а ┬а ┬а ┬а </div>
┬а ┬а </header>
┬а ┬а┬а
┬а ┬а <div id="home-section" class="section-content flex-grow flex flex-col">
┬а ┬а ┬а ┬а <section class="relative flex-grow flex items-center justify-center text-center overflow-hidden h-full">
┬а ┬а ┬а ┬а <img┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а src="https://console.kr-asia.com/wp-content/uploads/2023/06/medium-shot-man-wearing-vr-glasses-scaled.jpg"┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а alt="Man wearing VR glasses background"┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а class="absolute inset-0 h-full w-full object-cover blur-sm scale-110" >
┬а ┬а ┬а ┬а ┬а ┬а <div class="absolute inset-0 bg-indigo-900/80"></div>
┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а <div class="relative z-10 max-w-2xl p-6">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <h2 class="text-4xl sm:text-5xl lg:text-6xl font-extrabold text-white mb-4 leading-snug drop-shadow-lg">р╕гр╕░р╕Ър╕Ър╕Щр╕│р╕Чр╕▓р╕Зр╕лр╣Йр╕нр╕Зр╣Ар╕гр╕╡р╕вр╕Щр╕нр╕▒р╕Ир╕Йр╕гр╕┤р╕вр╕░р╕Чр╕╡р╣Ир╕Чр╕▒р╕Щр╕кр╕бр╕▒р╕в</h2>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p class="text-lg sm:text-xl text-indigo-200 mb-8">р╕Фр╣Йр╕зр╕вр╕гр╕░р╕Ър╕Ър╣Ар╕Чр╕Др╣Вр╕Щр╣Вр╕ер╕вр╕╡р╣Ар╕кр╕бр╕╖р╕нр╕Щ AR/VR р╕Чр╕╡р╣Ир╕кр╕бр╕Ир╕гр╕┤р╕З</p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="flex rounded-3xl shadow-2xl overflow-hidden max-w-md mx-auto ring-4 ring-indigo-300/50">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <input type="text" placeholder="р╕Др╣Йр╕Щр╕лр╕▓р╕лр╣Йр╕нр╕Зр╣Ар╕гр╕╡р╕вр╕Щ р╣Ар╕Кр╣Ир╕Щ 201, р╕лр╣Йр╕нр╕Зр╕Ыр╕Пр╕┤р╕Ър╕▒р╕Хр╕┤р╕Бр╕▓р╕гр╕Др╕нр╕бр╕Юр╕┤р╕зр╣Ар╕Хр╕нр╕гр╣М" class="w-full py-3 px-6 text-gray-800 focus:outline-none focus:ring-4 focus:ring-indigo-500/50 transition duration-150 text-base sm:text-lg focus:z-10" aria-label="Search">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <button class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 transition duration-150 flex items-center space-x-2">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <i data-lucide="search" class="w-5 h-5"></i>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span class="hidden sm:inline">р╕Др╣Йр╕Щр╕лр╕▓</span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </button>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <button onclick="showSection('map-section')" class="mt-8 bg-pink-600 hover:bg-pink-700 text-white font-bold py-3 px-8 rounded-3xl shadow-xl transition duration-200 transform hover:scale-105 flex items-center justify-center mx-auto space-x-2 ring-2 ring-pink-300/50">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <i data-lucide="map" class="w-5 h-5"></i>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span>р╕Фр╕╣р╣Бр╕Ьр╕Щр╕Ьр╕▒р╕Зр╕нр╕▓р╕Др╕▓р╕гр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф</span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </button>
┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а </section>
┬а ┬а </div>

┬а ┬а <div id="map-section" class="section-content hidden flex-grow p-4 sm:p-8">
┬а ┬а ┬а ┬а <div class="max-w-7xl mx-auto">
┬а ┬а ┬а ┬а ┬а ┬а <h2 class="text-3xl sm:text-4xl font-extrabold text-gray-900 mb-6 border-b-4 border-indigo-200 pb-2 flex items-center">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <i data-lucide="layout-grid" class="w-8 h-8 mr-3 text-indigo-600"></i>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а р╣Бр╕Ьр╕Щр╕Ьр╕▒р╕Зр╣Бр╕ер╕░р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╕нр╕▓р╕Др╕▓р╕гр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
┬а ┬а ┬а ┬а ┬а ┬а </h2>
┬а ┬а ┬а ┬а ┬а ┬а <p class="text-gray-600 mb-8 max-w-3xl">р╕Щр╕╡р╣Ир╕Др╕╖р╕нр╕гр╕▓р╕вр╕Бр╕▓р╕гр╕нр╕▓р╕Др╕▓р╕гр╕лр╕ер╕▒р╕Бр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╕Вр╕нр╕Зр╕зр╕┤р╕Чр╕вр╕▓р╕ер╕▒р╕вр╣Ар╕Чр╕Др╕Щр╕┤р╕Др╕кр╕╕р╕гр╕▓р╕йр╕Ор╕гр╣Мр╕Шр╕▓р╕Щр╕╡ р╕Др╕╕р╕Ур╕кр╕▓р╕бр╕▓р╕гр╕Цр╕Бр╕Фр╕Чр╕╡р╣Ир╕нр╕▓р╕Др╕▓р╕гр╣Ар╕Юр╕╖р╣Ир╕нр╕Фр╕╣р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Ф р╣Бр╕ер╕░р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╣Вр╕лр╕бр╕Ф 3D р╕Ир╕│р╕ер╕нр╕Зр╣Ар╕кр╕бр╕╖р╕нр╕Щ (р╕Цр╣Йр╕▓р╕бр╕╡).</p>
┬а ┬а ┬а ┬а ┬а ┬а <div id="building-list" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8"></div>
┬а ┬а ┬а ┬а ┬а ┬а <div class="mt-10 p-6 bg-yellow-50 border-l-8 border-yellow-500 rounded-2xl shadow-md">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p class="text-yellow-800 font-semibold flex items-start">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <i data-lucide="info" class="w-5 h-5 mr-3 mt-1 flex-shrink-0"></i>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а р╕лр╕бр╕▓р╕вр╣Ар╕лр╕Хр╕╕: р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕нр╕▓р╕Др╕▓р╕гр╣Бр╕ер╕░р╕гр╕╣р╕Ыр╕ар╕▓р╕Ю 3D р╣Ар╕Ыр╣Зр╕Щр╣Ар╕Юр╕╡р╕вр╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕кр╕бр╕бр╕Хр╕┤р╣Ар╕Юр╕╖р╣Ир╕нр╣Бр╕кр╕Фр╕Зр╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щр╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щ
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </p>
┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а </div>
┬а ┬а </div>
</div>

<footer class="bg-gray-900 text-white py-4 shadow-inner">
┬а ┬а <div class="text-center text-sm">
┬а ┬а ┬а ┬а ┬й 2025 р╕зр╕┤р╕Чр╕вр╕▓р╕ер╕▒р╕вр╣Ар╕Чр╕Др╕Щр╕┤р╕Др╕кр╕╕р╕гр╕▓р╕йр╕Ор╕гр╣Мр╕Шр╕▓р╕Щр╕╡ - р╣Бр╕Ьр╕Щр╕Бр╣Ар╕Чр╕Др╣Вр╕Щр╣Вр╕ер╕вр╕╡р╕кр╕▓р╕гр╕кр╕Щр╣Ар╕Чр╕и
┬а ┬а </div>
</footer>

<div id="install-qr-modal" class="hidden fixed inset-0 bg-gray-900 bg-opacity-80 z-50 flex items-center justify-center p-4">
┬а ┬а <div class="bg-white rounded-3xl shadow-2xl max-w-lg w-full p-6 sm:p-8 transform transition-all duration-300 scale-95 opacity-0" data-modal-target> <div class="flex justify-between items-start mb-4 border-b pb-2">
┬а ┬а ┬а ┬а ┬а ┬а <h3 class="text-2xl font-bold text-indigo-700 flex items-center">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <i data-lucide="download-cloud" class="w-6 h-6 mr-2 text-indigo-500"></i>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕Зр╣Бр╕нр╕Ыр╕Юр╕ер╕┤р╣Ар╕Др╕Кр╕▒р╕Щ / р╕кр╣Бр╕Бр╕Щ QR Code
┬а ┬а ┬а ┬а ┬а ┬а </h3>
┬а ┬а ┬а ┬а ┬а ┬а <button onclick="hideModal('install-qr-modal')" class="text-gray-500 hover:text-gray-900 transition p-1 rounded-full hover:bg-gray-100">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <i data-lucide="x" class="w-6 h-6"></i>
┬а ┬а ┬а ┬а ┬а ┬а </button>
┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а <p class="text-gray-600 mb-6">р╕Др╕╕р╕Ур╕кр╕▓р╕бр╕▓р╕гр╕Цр╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕Зр╣Бр╕нр╕Ыр╕Юр╕ер╕┤р╣Ар╕Др╕Кр╕▒р╕Щр╕Щр╕╡р╣Йр╕Ър╕Щр╕бр╕╖р╕нр╕Цр╕╖р╕нр╕Вр╕нр╕Зр╕Др╕╕р╕Ур╣Др╕Фр╣Йр╕Фр╣Йр╕зр╕вр╕зр╕┤р╕Шр╕╡р╣Гр╕Фр╕зр╕┤р╕Шр╕╡р╕лр╕Щр╕╢р╣Ир╕Зр╕Фр╣Йр╕▓р╕Щр╕ер╣Ир╕▓р╕Зр╕Щр╕╡р╣Й:</p>

┬а ┬а ┬а ┬а <div class="bg-indigo-50 p-6 rounded-2xl mb-6 flex flex-col items-center border border-indigo-200 shadow-inner"> <h4 class="font-semibold text-xl text-indigo-800 mb-3 flex items-center">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <i data-lucide="scan" class="w-5 h-5 mr-2"></i>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а р╕кр╣Бр╕Бр╕Щ QR Code р╕кр╕│р╕лр╕гр╕▒р╕Ър╕ер╕┤р╕Зр╕Бр╣Мр╣Ар╕зр╣Зр╕Ър╣Др╕Лр╕Хр╣М
┬а ┬а ┬а ┬а ┬а ┬а </h4>
┬а ┬а ┬а ┬а ┬а ┬а <div id="qrcode-display" class="my-4 p-4 bg-white rounded-xl shadow-lg inline-block ring-2 ring-indigo-200"> <div class="text-gray-500 text-sm">р╕Бр╕│р╕ер╕▒р╕Зр╕кр╕гр╣Йр╕▓р╕З QR Code...</div>
┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а <button id="qr-download-btn" onclick="downloadQRCode()" class="mt-4 bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-full transition duration-150 shadow-md transform hover:scale-105">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <i data-lucide="download" class="inline w-5 h-5 mr-1"></i>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а р╕Фр╕▓р╕зр╕Щр╣Мр╣Вр╕лр╕ер╕Ф QR Code (PNG)
┬а ┬а ┬а ┬а ┬а ┬а </button>
┬а ┬а ┬а ┬а </div>

┬а ┬а ┬а ┬а <h4 class="font-semibold text-xl text-indigo-700 mb-4 flex items-center border-b pb-2">
┬а ┬а ┬а ┬а ┬а ┬а <i data-lucide="smartphone" class="w-5 h-5 mr-2"></i>
┬а ┬а ┬а ┬а ┬а ┬а р╕Др╕│р╣Бр╕Щр╕░р╕Щр╕│р╕Бр╕▓р╕гр╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕З PWA
┬а ┬а ┬а ┬а </h4>
┬а ┬а ┬а ┬а <div class="space-y-4">
┬а ┬а ┬а ┬а ┬а ┬а <div class="bg-gray-100 p-4 rounded-xl border-l-4 border-indigo-500 shadow-sm"> <h5 class="font-semibold text-lg text-indigo-700 mb-2">р╕кр╕│р╕лр╕гр╕▒р╕Ъ iPhone (iOS)</h5>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <ol class="list-decimal list-inside text-gray-700 space-y-1 text-sm sm:text-base">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <li>р╣Ар╕Ыр╕┤р╕Фр╣Ар╕зр╣Зр╕Ър╣Др╕Лр╕Хр╣Мр╕Фр╣Йр╕зр╕вр╣Ар╕Ър╕гр╕▓р╕зр╣Мр╣Ар╕Лр╕нр╕гр╣М **Safari**</li>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <li>р╣Бр╕Хр╕░р╕Чр╕╡р╣И **р╕Ыр╕╕р╣Ир╕бр╣Бр╕Кр╕гр╣М** (<i data-lucide="share" class="inline w-4 h-4 text-indigo-500"></i>) р╕Чр╕╡р╣Ир╕нр╕вр╕╣р╣Ир╕Фр╣Йр╕▓р╕Щр╕ер╣Ир╕▓р╕Зр╕Вр╕нр╕Зр╕лр╕Щр╣Йр╕▓р╕Ир╕н</li>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <li>р╣Ар╕ер╕╖р╣Ир╕нр╕Щр╕ер╕Зр╣Бр╕ер╕░р╣Ар╕ер╕╖р╕нр╕Б **р╣Ар╕Юр╕┤р╣Ир╕бр╣Др╕Ыр╕вр╕▒р╕Зр╕лр╕Щр╣Йр╕▓р╕Ир╕нр╣Вр╕ор╕б** (Add to Home Screen)</li>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </ol>
┬а ┬а ┬а ┬а ┬а ┬а </div>

┬а ┬а ┬а ┬а ┬а ┬а <div class="bg-gray-100 p-4 rounded-xl border-l-4 border-green-500 shadow-sm"> <h5 class="font-semibold text-lg text-green-700 mb-2">р╕кр╕│р╕лр╕гр╕▒р╕Ъ Android</h5>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <ol class="list-decimal list-inside text-gray-700 space-y-1 text-sm sm:text-base">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <li>р╣Ар╕Ыр╕┤р╕Фр╣Ар╕зр╣Зр╕Ър╣Др╕Лр╕Хр╣Мр╕Фр╣Йр╕зр╕вр╣Ар╕Ър╕гр╕▓р╕зр╣Мр╣Ар╕Лр╕нр╕гр╣М **Chrome**</li>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <li>р╣Бр╕Хр╕░р╕Чр╕╡р╣И **р╕Ыр╕╕р╣Ир╕бр╣Ар╕бр╕Щр╕╣** (р╕Ир╕╕р╕Фр╕кр╕▓р╕бр╕Ир╕╕р╕Ф) р╕Чр╕╡р╣Ир╕бр╕╕р╕бр╕Вр╕зр╕▓р╕Ър╕Щ</li>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <li>р╣Ар╕ер╕╖р╕нр╕Б **р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕Зр╣Бр╕нр╕Ы** р╕лр╕гр╕╖р╕н **р╣Ар╕Юр╕┤р╣Ир╕бр╣Др╕Ыр╕вр╕▒р╕Зр╕лр╕Щр╣Йр╕▓р╕Ир╕нр╕лр╕ер╕▒р╕Б** (Install app / Add to Home screen)</li>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </ol>
┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а </div>
┬а ┬а </div>
</div>

<div id="building-detail-modal" class="hidden fixed inset-0 bg-gray-900 bg-opacity-80 z-50 flex items-center justify-center p-4">
┬а ┬а <div class="bg-white rounded-3xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto p-6 sm:p-8 transform transition-all duration-300 scale-95 opacity-0" data-modal-target> <div class="flex justify-between items-start mb-4 border-b pb-2">
┬а ┬а ┬а ┬а ┬а ┬а <h3 id="building-title" class="text-2xl font-bold text-indigo-700 flex items-center">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <i data-lucide="building-2" class="w-6 h-6 mr-2 text-indigo-500"></i>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╕нр╕▓р╕Др╕▓р╕г
┬а ┬а ┬а ┬а ┬а ┬а </h3>
┬а ┬а ┬а ┬а ┬а ┬а <button onclick="hideModal('building-detail-modal'); stopAframeScene();" class="text-gray-500 hover:text-gray-900 transition p-1 rounded-full hover:bg-gray-100">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <i data-lucide="x" class="w-6 h-6"></i>
┬а ┬а ┬а ┬а ┬а ┬а </button>
┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а <div class="flex space-x-2 mb-6 border-b border-gray-200">
┬а ┬а ┬а ┬а ┬а ┬а <button id="tab-detail" onclick="showBuildingTab('detail')" class="py-2 px-4 text-lg font-semibold text-white bg-indigo-600 rounded-t-xl transition duration-150 flex items-center shadow-md">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <i data-lucide="info" class="w-5 h-5 mr-2"></i> р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕нр╕▓р╕Др╕▓р╕г
┬а ┬а ┬а ┬а ┬а ┬а </button>
┬а ┬а ┬а ┬а ┬а ┬а <button id="tab-3d" onclick="showBuildingTab('3d')" class="py-2 px-4 text-lg font-semibold text-gray-600 hover:text-indigo-600 hover:bg-indigo-50 rounded-t-xl transition duration-150 flex items-center bg-white">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <i data-lucide="cube" class="w-5 h-5 mr-2"></i> р╕Фр╕╣р╣Бр╕Ър╕Ъ 3D/VR
┬а ┬а ┬а ┬а ┬а ┬а </button>
┬а ┬а ┬а ┬а </div>

┬а ┬а ┬а ┬а <div id="building-tab-detail" class="tab-content space-y-4">
┬а ┬а ┬а ┬а ┬а ┬а <div id="building-image-container" class="rounded-2xl overflow-hidden shadow-xl h-60 bg-gray-200 flex items-center justify-center ring-4 ring-indigo-100"> <img id="building-image" src="" alt="р╕гр╕╣р╕Ыр╕ар╕▓р╕Юр╕нр╕▓р╕Др╕▓р╕г" class="object-cover w-full h-full">
┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а <p id="building-description" class="text-gray-700 p-2 bg-gray-50 rounded-xl"></p>
┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а <div class="grid grid-cols-2 gap-4 text-gray-700 p-4 bg-indigo-50 rounded-xl border border-indigo-200">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="col-span-2 text-indigo-800 font-bold mb-2 border-b border-indigo-200 pb-2">р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╕Чр╕▓р╕Зр╣Ар╕Чр╕Др╕Щр╕┤р╕Д</div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p><strong>р╕Ир╕│р╕Щр╕зр╕Щр╕Кр╕▒р╣Йр╕Щ:</strong> <span id="building-floors"></span></p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p><strong>р╣Бр╕Ьр╕Щр╕Бр╕Чр╕╡р╣Ир╣Ар╕Бр╕╡р╣Ир╕вр╕зр╕Вр╣Йр╕нр╕З:</strong> <span id="building-departments"></span></p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p><strong>р╕лр╣Йр╕нр╕Зр╣Ар╕гр╕╡р╕вр╕Щ/р╣Бр╕ер╣Зр╕Ър╕лр╕ер╕▒р╕Б:</strong> <span id="building-rooms"></span></p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p><strong>р╕ер╕┤р╕Зр╕Бр╣Мр╣Бр╕Ьр╕Щр╕Чр╕╡р╣И:</strong> <a id="building-map-link" href="#" target="_blank" class="text-pink-600 hover:underline font-semibold flex items-center space-x-1"><i data-lucide="navigation" class="w-4 h-4"></i><span>р╕Щр╕│р╕Чр╕▓р╕Зр╕Фр╣Йр╕зр╕в Google Maps</span></a></p>
┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а </div>

┬а ┬а ┬а ┬а <div id="building-tab-3d" class="tab-content hidden">
┬а ┬а ┬а ┬а ┬а ┬а <div id="aframe-scene-container">
┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а <div class="mt-4 p-4 bg-blue-50 border-l-4 border-blue-500 rounded-xl shadow-md"> <p class="text-blue-800 text-sm flex items-start">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <i data-lucide="vr-glasses" class="w-5 h-5 mr-2 mt-0.5 flex-shrink-0"></i>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а **р╣Ар╕Др╕ер╣Зр╕Фр╕ер╕▒р╕Ъ:** р╕лр╕▓р╕Бр╣Гр╕Кр╣Йр╕бр╕╖р╕нр╕Цр╕╖р╕н р╕кр╕▓р╕бр╕▓р╕гр╕Цр╕Бр╕Фр╕Ыр╕╕р╣Ир╕б VR р╕бр╕╕р╕бр╕Вр╕зр╕▓р╕ер╣Ир╕▓р╕Зр╣Гр╕Щр╕Йр╕▓р╕Б 3D р╣Ар╕Юр╕╖р╣Ир╕нр╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╣Вр╕лр╕бр╕Ф VR/Cardboard
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </p>
┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а </div>

┬а ┬а ┬а ┬а <button onclick="hideModal('building-detail-modal'); stopAframeScene();" class="mt-8 bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-4 rounded-3xl shadow-xl transition duration-150 w-full flex items-center justify-center space-x-2 transform hover:scale-[0.99] ring-2 ring-red-300/50"> <i data-lucide="x" class="w-5 h-5"></i>
┬а ┬а ┬а ┬а ┬а ┬а <span>р╕Ыр╕┤р╕Фр╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Ф</span>
┬а ┬а ┬а ┬а </button>
┬а ┬а </div>
</div>

<div id="vr-container" class="hidden fixed inset-0 z-50 bg-black flex flex-col items-center justify-center w-screen h-screen">
┬а ┬а <video id="camera-feed" class="w-full h-full object-cover absolute inset-0" playsinline autoplay muted></video>
┬а ┬а┬а
┬а ┬а <div class="relative z-10 w-full h-full p-4 flex flex-col justify-between items-center pointer-events-none">
┬а ┬а ┬а ┬а <div id="ar-message" class="bg-yellow-400 text-gray-900 font-extrabold p-4 rounded-3xl shadow-2xl text-center transition-opacity duration-500 opacity-100 pointer-events-auto text-sm sm:text-lg ring-4 ring-yellow-200"> <p>р╕Бр╕│р╕ер╕▒р╕Зр╕гр╕нр╕Бр╕▓р╕гр╕нр╕Щр╕╕р╕Нр╕▓р╕Хр╕Бр╕ер╣Йр╕нр╕Зр╣Бр╕ер╕░р╕Хр╕│р╣Бр╕лр╕Щр╣Ир╕З...</p>
┬а ┬а ┬а ┬а </div>

┬а ┬а ┬а ┬а <div class="flex flex-col items-center mt-auto mb-16 text-white text-center">
┬а ┬а ┬а ┬а ┬а ┬а <i id="ar-arrow" data-lucide="arrow-up" class="w-16 h-16 mb-2 animate-bounce drop-shadow-lg text-green-400" style="transform: rotate(0deg);"></i>
┬а ┬а ┬а ┬а ┬а ┬а <p id="ar-destination" class="text-xl sm:text-3xl font-extrabold drop-shadow-2xl bg-black/60 p-3 rounded-2xl border-2 border-white/50">р╕бр╕╕р╣Ир╕Зр╕лр╕Щр╣Йр╕▓р╣Др╕Ыр╕вр╕▒р╕З: р╕лр╣Йр╕нр╕З 305 (р╕гр╕░р╕вр╕░р╕Чр╕▓р╕З 15 р╕б.)</p> </div>
┬а ┬а </div>
┬а ┬а┬а
┬а ┬а <button onclick="toggleVRMode()" class="absolute top-4 right-4 z-20 bg-red-600 hover:bg-red-700 text-white font-bold p-3 rounded-full shadow-lg flex items-center space-x-2 pointer-events-auto transition transform hover:scale-110 ring-2 ring-red-300/50">
┬а ┬а ┬а ┬а <i data-lucide="x" class="w-6 h-6"></i>
┬а ┬а ┬а ┬а <span class="text-sm hidden sm:inline">р╕Ыр╕┤р╕Ф AR Mode</span>
┬а ┬а </button>

┬а ┬а <div id="error-message" class="hidden absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-red-700 text-white p-6 rounded-2xl shadow-2xl z-30 pointer-events-auto max-w-sm text-center ring-4 ring-red-500/50"> <h3 class="text-xl font-bold mb-2">р╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╣Ар╕Ыр╕┤р╕Фр╕Бр╕ер╣Йр╕нр╕Зр╣Др╕Фр╣Й</h3>
┬а ┬а ┬а ┬а <p class="text-sm">р╣Вр╕Ыр╕гр╕Фр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╕Др╕╕р╕Ур╣Др╕Фр╣Йр╕нр╕Щр╕╕р╕Нр╕▓р╕Хр╣Гр╕лр╣Йр╣Ар╕зр╣Зр╕Ър╣Др╕Лр╕Хр╣Мр╣Ар╕Вр╣Йр╕▓р╕Цр╕╢р╕Зр╕Бр╕ер╣Йр╕нр╕Зр╣Бр╕ер╣Йр╕з</p>
┬а ┬а ┬а ┬а <p class="text-xs mt-2">(р╕Др╕│р╣Ар╕Хр╕╖р╕нр╕Щ: р╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щр╕Бр╕ер╣Йр╕нр╕Зр╕Хр╣Йр╕нр╕Зр╣Гр╕Кр╣Йр╕Бр╕▓р╕гр╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕нр╣Бр╕Ър╕Ъ **HTTPS**)</p>
┬а ┬а ┬а ┬а <button onclick="hideErrorAndVR()" class="mt-4 bg-red-800 hover:bg-red-900 text-white font-bold py-2 px-4 rounded-full transition shadow-md">р╕гр╕▒р╕Ър╕Чр╕гр╕▓р╕Ъ</button>
┬а ┬а </div>
</div>


<script>
┬а ┬а // ----------------------- DATA: р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕нр╕▓р╕Др╕▓р╕гр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф (р╣Др╕бр╣Ир╕бр╕╡р╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕З) -----------------------
┬а ┬а const buildingsData = [
┬а ┬а ┬а ┬а {
┬а ┬а ┬а ┬а ┬а ┬а id: 'b1',
┬а ┬а ┬а ┬а ┬а ┬а name: 'р╕нр╕▓р╕Др╕▓р╕гр╕нр╕│р╕Щр╕зр╕вр╕Бр╕▓р╕гр╣Бр╕ер╕░р╕кр╕│р╕Щр╕▒р╕Бр╕Зр╕▓р╕Щ',
┬а ┬а ┬а ┬а ┬а ┬а short_name: 'р╕нр╕▓р╕Др╕▓р╕г 1',
┬а ┬а ┬а ┬а ┬а ┬а image_url: 'https://cdn.pixabay.com/photo/2015/12/08/00/31/office-1081079_1280.jpg',
┬а ┬а ┬а ┬а ┬а ┬а description: 'р╕нр╕▓р╕Др╕▓р╕гр╕ир╕╣р╕Щр╕вр╣Мр╕гр╕зр╕бр╕кр╕│р╕лр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╣Ар╕гр╕╡р╕вр╕Щр╕гр╕╣р╕Ыр╕кр╕│р╕лр╕гр╕▒р╕Ър╕Ыр╕гр╕┤р╕Нр╕Нр╕▓р╕Хр╕гр╕╡ р╕Чр╕е/р╕Ър╣Бр╕Ьр╕Щр╕Бр╕зр╕┤р╕Кр╕▓р╣Ар╕Чр╕Др╣Вр╕Щр╣Вр╕ер╕╡р╕кр╕▓р╕гр╕кр╕Щр╣Ар╕Чр╕и р╣Бр╕ер╕░ р╕лр╣Йр╕нр╕Зр╕Ыр╕Бр╕Др╕гр╕нр╕З-р╕Бр╕▓р╕гр╣Ар╕Зр╕┤р╕Щ-р╕Зр╕▓р╕Щр╕Чр╕░р╣Ар╕Ър╕╡р╕вр╕Щ-р╕Зр╕▓р╕Щр╕Ыр╕гр╕░р╕Кр╕▓р╕кр╕▒р╕бр╕Юр╕▒р╕Щр╕Шр╣М',
┬а ┬а ┬а ┬а ┬а ┬а floors: 2,
┬а ┬а ┬а ┬а ┬а ┬а departments: 'р╕кр╕│р╕Щр╕▒р╕Бр╕Зр╕▓р╕Щ, р╕Чр╕░р╣Ар╕Ър╕╡р╕вр╕Щ',
┬а ┬а ┬а ┬а ┬а ┬а rooms: 'р╕лр╣Йр╕нр╕Зр╣Ар╕гр╕╡р╕вр╕Щр╕Юр╕▒р╕Фр╕ер╕бр╕Ыр╕Бр╕Хр╕┤-р╕лр╣Йр╕нр╕Зр╣Ар╕гр╕╡р╕вр╕Щр╕Ыр╕гр╕▒р╕Ър╕нр╕▓р╕Бр╕▓р╕и-р╕кр╕│р╕Щр╕▒р╕Бр╕Зр╕▓р╕Щр╕гр╕▓р╕Кр╕Бр╕▓р╕г',
┬а ┬а ┬а ┬а ┬а ┬а map_link: 'https://maps.app.goo.gl/SRtCEGpxE38W4V1F6',
┬а ┬а ┬а ┬а ┬а ┬а model_url: 'https://cdn.aframe.io/examples/showcase/asset-portal-building.gltf' // р╣Вр╕бр╣Ар╕Фр╕е GLTF р╕кр╕бр╕бр╕Хр╕┤
┬а ┬а ┬а ┬а },
┬а ┬а ┬а ┬а {
┬а ┬а ┬а ┬а ┬а ┬а id: 'b2',
┬а ┬а ┬а ┬а ┬а ┬а name: 'р╕нр╕▓р╕Др╕▓р╕гр╣Бр╕Ьр╕Щр╕Бр╕зр╕┤р╕Кр╕▓ р╕нр╕┤р╣Ар╕ер╣Зр╕Бр╕Чр╕гр╕нр╕Щр╕┤р╕Бр╕кр╣М',
┬а ┬а ┬а ┬а ┬а ┬а short_name: 'р╕нр╕▓р╕Др╕▓р╕г 2',
┬а ┬а ┬а ┬а ┬а ┬а image_url: 'https://cdn.pixabay.com/photo/2017/08/07/21/28/students-2607675_1280.jpg',
┬а ┬а ┬а ┬а ┬а ┬а description: 'р╕лр╣Йр╕нр╕Зр╣Ар╕гр╕╡р╕вр╕Щ-р╕лр╣Йр╕нр╕Зр╕Ыр╕Ор╕┤р╕Ър╕▒р╕Хр╕┤р╕Бр╕▓р╕г',
┬а ┬а ┬а ┬а ┬а ┬а floors: 3,
┬а ┬а ┬а ┬а ┬а ┬а departments: 'р╣Бр╕Ьр╕Щр╕Бр╕зр╕┤р╕Кр╕▓р╕нр╕┤р╣Ар╕ер╣Зр╕Бр╕Чр╕гр╕нр╕Щр╕┤р╕Бр╕кр╣М, р╕кр╕▓р╕Вр╕▓р╕Зр╕▓р╕Щр╕Кр╣Ир╕▓р╕Зр╕нр╕┤р╣Ар╕ер╣Зр╕Бр╕Чр╕гр╕нр╕Щр╕┤р╕Бр╕кр╣М',
┬а ┬а ┬а ┬а ┬а ┬а rooms: 'р╕лр╣Йр╕нр╕Зр╕Ыр╕Пр╕┤р╕Ър╕▒р╕Хр╕┤р╕Бр╕▓р╕г 201-205, р╕лр╣Йр╕нр╕Зр╣Ар╕гр╕╡р╕вр╕Щр╕гр╕зр╕б',
┬а ┬а ┬а ┬а ┬а ┬а map_link: 'https://maps.app.goo.gl/SRtCEGpxE38W4V1F6',
┬а ┬а ┬а ┬а ┬а ┬а model_url: 'https://cdn.aframe.io/examples/boilerplate/models/wvr_head.gltf' // р╣Вр╕бр╣Ар╕Фр╕е GLTF р╕кр╕бр╕бр╕Хр╕┤
┬а ┬а ┬а ┬а },
┬а ┬а ┬а ┬а {
┬а ┬а ┬а ┬а ┬а ┬а id: 'b3',
┬а ┬а ┬а ┬а ┬а ┬а name: 'р╕нр╕▓р╕Др╕▓р╕гр╣Бр╕Ьр╕Щр╕Бр╕зр╕┤р╕Кр╕▓р╕кр╕▓р╕бр╕▒р╕Нр╕кр╕▒р╕бр╕Юр╕▒р╕Щр╕Шр╣М',
┬а ┬а ┬а ┬а ┬а ┬а short_name: 'р╕нр╕▓р╕Др╕▓р╕г 3',
┬а ┬а ┬а ┬а ┬а ┬а image_url: 'https://cdn.pixabay.com/photo/2016/09/22/20/09/factory-1687317_1280.jpg',
┬а ┬а ┬а ┬а ┬а ┬а description: 'р╣Ар╕Ыр╣Зр╕Щр╣Бр╕лр╕ер╣Ир╕Зр╣Ар╕гр╕╡р╕вр╕Щр╕гр╕╣р╣Йр╣Бр╕ер╕░р╕ир╕╢р╕Бр╕йр╕▓р╕кр╕│р╕лр╕гр╕▒р╕Ър╕лр╕бр╕зр╕Фр╕зр╕┤р╕Кр╕▓р╕кр╕▓р╕бр╕▒р╕Нр╣Ар╕Кр╣Ир╕Щ р╕зр╕┤р╕Чр╕вр╕▓р╕ир╕▓р╕кр╕Хр╕гр╣М-р╕ар╕▓р╕йр╕▓р╕нр╕▒р╕Зр╕Бр╕др╕й-р╕ар╕▓р╕йр╕▓р╕Ир╕╡р╕Щ-р╕Др╕Ур╕┤р╕Хр╕ир╕▓р╕кр╕Хр╕гр╣М-р╕лр╣Йр╕нр╕Зр╕Бр╕┤р╕Ир╕Бр╕гр╕гр╕бр╕нр╕Зр╕Др╕Бр╕гр╕зр╕┤р╕Кр╕▓р╕Кр╕╡р╕Ю',
┬а ┬а ┬а ┬а ┬а ┬а floors: 4,
┬а ┬а ┬а ┬а ┬а ┬а departments: 'р╕лр╕бр╕зр╕Фр╕зр╕┤р╕Кр╕▓р╕кр╕▓р╕бр╕▒р╕Нр╕кр╕▒р╕бр╕Юр╕▒р╕Щр╕Шр╣М, р╕Зр╕▓р╕Щр╕Бр╕┤р╕Ир╕Бр╕гр╕гр╕б',
┬а ┬а ┬а ┬а ┬а ┬а rooms: 'р╕лр╣Йр╕нр╕Зр╣Ар╕гр╕╡р╕вр╕Щр╕Юр╕▒р╕Фр╕ер╕б, р╕лр╣Йр╕нр╕Зр╣Ар╕гр╕╡р╕вр╕Щр╕Ыр╕гр╕▒р╕Ър╕нр╕▓р╕Бр╕▓р╕и , р╕лр╣Йр╕нр╕Зр╕Бр╕┤р╕Ир╕Бр╕гр╕гр╕б',
┬а ┬а ┬а ┬а ┬а ┬а map_link: 'https://maps.app.goo.gl/SRtCEGpxE38W4V1F6',
┬а ┬а ┬а ┬а ┬а ┬а model_url: 'https://cdn.aframe.io/examples/boilerplate/models/aframe.gltf' // р╣Вр╕бр╣Ар╕Фр╕е GLTF р╕кр╕бр╕бр╕Хр╕┤
┬а ┬а ┬а ┬а }
┬а ┬а ┬а ┬а // ... р╕кр╕▓р╕бр╕▓р╕гр╕Цр╣Ар╕Юр╕┤р╣Ир╕бр╕нр╕▓р╕Др╕▓р╕гр╕нр╕╖р╣Ир╕Щр╣Ж р╣Др╕Фр╣Й
┬а ┬а ];

┬а ┬а // ----------------------- GLOBAL VARIABLES & INIT -----------------------
┬а ┬а let deferredPrompt = null;
┬а ┬а let qrCodeInstance = null;
┬а ┬а let stream = null; // р╕кр╕│р╕лр╕гр╕▒р╕Ъ VR/AR Camera
┬а ┬а let orientationHandler = null; // р╕кр╕│р╕лр╕гр╕▒р╕Ъ Device Orientation
┬а ┬а┬а
┬а ┬а // Element References
┬а ┬а const homeSection = document.getElementById('home-section');
┬а ┬а const mapSection = document.getElementById('map-section');
┬а ┬а const mainContent = document.getElementById('main-content');
┬а ┬а const vrContainer = document.getElementById('vr-container');
┬а ┬а const buildingListContainer = document.getElementById('building-list');
┬а ┬а const buildingDetailModal = document.getElementById('building-detail-modal');
┬а ┬а const installQrModal = document.getElementById('install-qr-modal');
┬а ┬а const cameraFeed = document.getElementById('camera-feed');
┬а ┬а const arMessage = document.getElementById('ar-message');
┬а ┬а const errorMessage = document.getElementById('error-message');
┬а ┬а const arArrow = document.getElementById('ar-arrow');


┬а ┬а // ----------------------- CORE FUNCTIONS -----------------------

┬а ┬а // 1. р╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕Бр╕▓р╕гр╣Бр╕кр╕Фр╕Зр╕Ьр╕е Section (Home/Map)
┬а ┬а window.showSection = function(sectionId) {
┬а ┬а ┬а ┬а // р╕Лр╣Ир╕нр╕Щр╕Чр╕╕р╕Б Section р╕Бр╣Ир╕нр╕Щ
┬а ┬а ┬а ┬а document.querySelectorAll('.section-content').forEach(section => {
┬а ┬а ┬а ┬а ┬а ┬а section.classList.add('hidden');
┬а ┬а ┬а ┬а });

┬а ┬а ┬а ┬а // р╣Бр╕кр╕Фр╕З Section р╕Чр╕╡р╣Ир╣Ар╕ер╕╖р╕нр╕Б
┬а ┬а ┬а ┬а document.getElementById(sectionId).classList.remove('hidden');

┬а ┬а ┬а ┬а // р╕нр╕▒р╕Ыр╣Ар╕Фр╕Х Active Nav Link
┬а ┬а ┬а ┬а document.querySelectorAll('nav a').forEach(link => {
┬а ┬а ┬а ┬а ┬а ┬а link.classList.remove('text-indigo-600', 'bg-indigo-50', 'rounded-xl', 'font-bold'); // р╕Ыр╕гр╕▒р╕Ър╕Ыр╕гр╕╕р╕Зр╕Бр╕▓р╕гр╕ер╕Ъ
┬а ┬а ┬а ┬а ┬а ┬а link.classList.add('text-gray-700', 'font-semibold');
┬а ┬а ┬а ┬а });

┬а ┬а ┬а ┬а if (sectionId === 'home-section') {
┬а ┬а ┬а ┬а ┬а ┬а document.getElementById('nav-home').classList.add('text-indigo-600', 'bg-indigo-50', 'font-bold');
┬а ┬а ┬а ┬а ┬а ┬а document.getElementById('nav-home').classList.remove('text-gray-700', 'font-semibold');
┬а ┬а ┬а ┬а } else if (sectionId === 'map-section') {
┬а ┬а ┬а ┬а ┬а ┬а document.getElementById('nav-map').classList.add('text-indigo-600', 'bg-indigo-50', 'font-bold');
┬а ┬а ┬а ┬а ┬а ┬а document.getElementById('nav-map').classList.remove('text-gray-700', 'font-semibold');
┬а ┬а ┬а ┬а }
┬а ┬а }

┬а ┬а // 2. р╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щр╣Бр╕кр╕Фр╕Зр╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╕Хр╕╢р╕Бр╣Бр╕ер╕░ 3D
┬а ┬а window.showBuildingDetail = function(buildingId) {
┬а ┬а ┬а ┬а const building = buildingsData.find(b => b.id === buildingId);
┬а ┬а ┬а ┬а if (!building) return;

┬а ┬а ┬а ┬а // р╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Ф
┬а ┬а ┬а ┬а document.getElementById('building-title').innerHTML = `<i data-lucide="building-2" class="w-6 h-6 mr-2 text-indigo-500"></i> ${building.name} (${building.short_name})`;
┬а ┬а ┬а ┬а document.getElementById('building-image').src = building.image_url;
┬а ┬а ┬а ┬а document.getElementById('building-image').alt = `р╕гр╕╣р╕Ыр╕ар╕▓р╕Юр╕нр╕▓р╕Др╕▓р╕г ${building.name}`;
┬а ┬а ┬а ┬а document.getElementById('building-description').textContent = building.description;
┬а ┬а ┬а ┬а document.getElementById('building-floors').textContent = building.floors;
┬а ┬а ┬а ┬а document.getElementById('building-departments').textContent = building.departments;
┬а ┬а ┬а ┬а document.getElementById('building-rooms').textContent = building.rooms;
┬а ┬а ┬а ┬а document.getElementById('building-map-link').href = building.map_link;

┬а ┬а ┬а ┬а // р╣Бр╕кр╕Фр╕З Modal р╣Бр╕ер╕░ Tab р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щ
┬а ┬а ┬а ┬а showModal('building-detail-modal');
┬а ┬а ┬а ┬а showBuildingTab('detail', building);
┬а ┬а ┬а ┬а lucide.createIcons();
┬а ┬а }

┬а ┬а // 3. р╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕Бр╕▓р╕гр╕кр╕ер╕▒р╕Ъ Tab р╣Гр╕Щ Building Detail Modal
┬а ┬а window.showBuildingTab = function(tabName, building = null) {
┬а ┬а ┬а ┬а // р╕Лр╣Ир╕нр╕Щр╕Чр╕╕р╕Б Tab Content
┬а ┬а ┬а ┬а document.querySelectorAll('.tab-content').forEach(tab => tab.classList.add('hidden'));
┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а // р╕гр╕╡р╣Ар╕Лр╣Зр╕Хр╕Ыр╕╕р╣Ир╕б Tab
┬а ┬а ┬а ┬а document.querySelectorAll('button[id^="tab-"]').forEach(btn => {
┬а ┬а ┬а ┬а ┬а ┬а btn.classList.remove('bg-indigo-600', 'text-white', 'shadow-md');
┬а ┬а ┬а ┬а ┬а ┬а btn.classList.add('text-gray-600', 'hover:text-indigo-600', 'bg-white', 'hover:bg-indigo-50');
┬а ┬а ┬а ┬а });

┬а ┬а ┬а ┬а // р╣Бр╕кр╕Фр╕З Tab р╕Чр╕╡р╣Ир╣Ар╕ер╕╖р╕нр╕Б
┬а ┬а ┬а ┬а document.getElementById(`building-tab-${tabName}`).classList.remove('hidden');
┬а ┬а ┬а ┬а document.getElementById(`tab-${tabName}`).classList.add('bg-indigo-600', 'text-white', 'shadow-md');
┬а ┬а ┬а ┬а document.getElementById(`tab-${tabName}`).classList.remove('text-gray-600', 'hover:text-indigo-600', 'bg-white', 'hover:bg-indigo-50');
┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а // р╕лр╕▓р╕Бр╣Ар╕ер╕╖р╕нр╕Б Tab 3D
┬а ┬а ┬а ┬а if (tabName === '3d' && building) {
┬а ┬а ┬а ┬а ┬а ┬а loadAframeScene(building.model_url);
┬а ┬а ┬а ┬а } else if (tabName === 'detail') {
┬а ┬а ┬а ┬а ┬а ┬а stopAframeScene(); // р╕лр╕вр╕╕р╕Ф 3D р╣Ар╕бр╕╖р╣Ир╕нр╕кр╕ер╕▒р╕Ър╣Др╕Ыр╕Фр╕╣р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Ф
┬а ┬а ┬а ┬а }
┬а ┬а }

┬а ┬а // 4. р╣Вр╕лр╕ер╕Ф A-Frame Scene р╕кр╕│р╕лр╕гр╕▒р╕Ър╣Бр╕кр╕Фр╕Зр╕Ьр╕е 3D (р╣Др╕бр╣Ир╕бр╕╡р╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕З Logic)
┬а ┬а function loadAframeScene(modelUrl) {
┬а ┬а ┬а ┬а const sceneContainer = document.getElementById('aframe-scene-container');
┬а ┬а ┬а ┬а // р╕ер╣Йр╕▓р╕З scene р╣Ар╕Бр╣Ир╕▓р╕Цр╣Йр╕▓р╕бр╕╡
┬а ┬а ┬а ┬а sceneContainer.innerHTML = '';
┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а // р╕кр╕гр╣Йр╕▓р╕З A-Frame Scene р╣Гр╕лр╕бр╣И
┬а ┬а ┬а ┬а const aframeScene = document.createElement('a-scene');
┬а ┬а ┬а ┬а aframeScene.setAttribute('embedded', '');
┬а ┬а ┬а ┬а aframeScene.setAttribute('style', 'width: 100%; height: 100%;');
┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а // р╣Ар╕Юр╕┤р╣Ир╕б Environment (р╣Ар╕Кр╣Ир╕Щ р╕Юр╕╖р╣Йр╕Щр╕лр╕ер╕▒р╕З, р╣Бр╕кр╕Зр╕кр╕зр╣Ир╕▓р╕З)
┬а ┬а ┬а ┬а aframeScene.innerHTML += `
┬а ┬а ┬а ┬а ┬а ┬а <a-entity environment="preset: default; dressing: trees; ground: hills; playArea: 1.0"></a-entity>
┬а ┬а ┬а ┬а `;
┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а // р╣Ар╕Юр╕┤р╣Ир╕бр╣Вр╕бр╣Ар╕Фр╕е 3D (GLTF)
┬а ┬а ┬а ┬а aframeScene.innerHTML += `
┬а ┬а ┬а ┬а ┬а ┬а <a-entity┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а gltf-model="${modelUrl}"┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а position="0 1 -3"┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а rotation="0 0 0"┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а scale="1 1 1"
┬а ┬а ┬а ┬а ┬а ┬а ></a-entity>
┬а ┬а ┬а ┬а `;

┬а ┬а ┬а ┬а // р╣Ар╕Юр╕┤р╣Ир╕бр╕Бр╕ер╣Йр╕нр╕Зр╣Бр╕ер╕░р╕Др╕зр╕Ър╕Др╕╕р╕б
┬а ┬а ┬а ┬а aframeScene.innerHTML += `
┬а ┬а ┬а ┬а ┬а ┬а <a-entity camera look-controls wasd-controls position="0 1.6 0"></a-entity>
┬а ┬а ┬а ┬а `;
┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а // р╣Ар╕Юр╕┤р╣Ир╕бр╣Бр╕кр╕Зр╕кр╕зр╣Ир╕▓р╕З
┬а ┬а ┬а ┬а aframeScene.innerHTML += `
┬а ┬а ┬а ┬а ┬а ┬а <a-light type="directional" color="#fff" intensity="0.5" position="-1 1 1"></a-light>
┬а ┬а ┬а ┬а ┬а ┬а <a-light type="ambient" color="#fff" intensity="0.5"></a-light>
┬а ┬а ┬а ┬а `;

┬а ┬а ┬а ┬а sceneContainer.appendChild(aframeScene);
┬а ┬а ┬а ┬а // A-Frame р╕Ир╕░р╕Чр╕│р╕Бр╕▓р╕гр╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щр╣Ар╕нр╕З
┬а ┬а }

┬а ┬а // 5. р╕лр╕вр╕╕р╕Ф A-Frame Scene (р╣Др╕бр╣Ир╕бр╕╡р╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕З Logic)
┬а ┬а window.stopAframeScene = function() {
┬а ┬а ┬а ┬а const sceneContainer = document.getElementById('aframe-scene-container');
┬а ┬а ┬а ┬а const aframeScene = sceneContainer.querySelector('a-scene');
┬а ┬а ┬а ┬а if (aframeScene) {
┬а ┬а ┬а ┬а ┬а ┬а // р╕ер╕Ър╕нр╕Зр╕Др╣Мр╕Ыр╕гр╕░р╕Бр╕нр╕Ъ A-Frame р╕нр╕нр╕Бр╕Ир╕▓р╕Б DOM
┬а ┬а ┬а ┬а ┬а ┬а aframeScene.parentNode.removeChild(aframeScene);
┬а ┬а ┬а ┬а ┬а ┬а // р╣Ар╕Юр╕╖р╣Ир╕нр╣Гр╕лр╣Й A-Frame р╕Цр╕╣р╕Бр╣Ар╕Др╕ер╕╡р╕вр╕гр╣Мр╕нр╕вр╣Ир╕▓р╕Зр╕кр╕бр╕Ър╕╣р╕гр╕Ур╣М р╕Др╕зр╕гр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Фр╣Йр╕зр╕вр╕зр╣Ир╕▓р╕бр╕╡р╕Бр╕▓р╕гр╣Ар╕гр╕╡р╕вр╕Бр╣Гр╕Кр╣Й A-Frame.js р╕нр╕вр╣Ир╕▓р╕Зр╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З
┬а ┬а ┬а ┬а }
┬а ┬а }


┬а ┬а // 6. р╕кр╕гр╣Йр╕▓р╕Зр╕гр╕▓р╕вр╕Бр╕▓р╕гр╕Хр╕╢р╕Бр╣Гр╕Щ Map Section (р╕Ыр╕гр╕▒р╕Ър╕Ыр╕гр╕╕р╕З Card Style)
┬а ┬а function renderBuildingList() {
┬а ┬а ┬а ┬а buildingListContainer.innerHTML = buildingsData.map(building => `
┬а ┬а ┬а ┬а ┬а ┬а <div class="bg-white rounded-3xl shadow-xl hover:shadow-2xl transition duration-300 overflow-hidden border border-gray-200 flex flex-col transform hover:scale-[1.02] ring-2 ring-transparent hover:ring-indigo-300"> <div class="h-44 bg-gray-200 overflow-hidden"> <img src="${building.image_url}" alt="${building.name}" class="w-full h-full object-cover transition duration-300 hover:opacity-90">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <div class="p-6 flex flex-col flex-grow">
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <h4 class="text-xl font-extrabold text-indigo-700 mb-1 border-b pb-1">${building.name}</h4> <p class="text-sm font-semibold text-gray-500 mb-3">(${building.short_name} | ${building.floors} р╕Кр╕▒р╣Йр╕Щ)</p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <p class="text-gray-600 text-sm flex-grow mb-4">${building.description.substring(0, 100)}...</p>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <button┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а onclick="showBuildingDetail('${building.id}')"┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а class="mt-auto bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 rounded-full shadow-lg transition duration-150 flex items-center justify-center space-x-2 transform hover:scale-[1.02] ring-2 ring-indigo-300/50" >
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <i data-lucide="eye" class="w-5 h-5"></i>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а <span>р╕Фр╕╣р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Ф & 3D</span>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </button>
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а ┬а ┬а </div>
┬а ┬а ┬а ┬а `).join('');

┬а ┬а ┬а ┬а lucide.createIcons(); // р╕Хр╣Йр╕нр╕Зр╣Ар╕гр╕╡р╕вр╕Бр╕нр╕╡р╕Бр╕Др╕гр╕▒р╣Йр╕Зр╕лр╕ер╕▒р╕Зр╣Ар╕Юр╕┤р╣Ир╕б DOM р╣Гр╕лр╕бр╣И
┬а ┬а }

┬а ┬а // 7. PWA, QR Code, Modal, AR/VR
┬а ┬а // **********************************************
┬а ┬а┬а
┬а ┬а // [PWA Logic] (р╣Др╕бр╣Ир╕бр╕╡р╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕З)
┬а ┬а if ('serviceWorker' in navigator) {
┬а ┬а ┬а ┬а window.addEventListener('load', () => {
┬а ┬а ┬а ┬а ┬а ┬а navigator.serviceWorker.register('/service-worker.js')
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а .then(registration => { console.log('SW registered: ', registration); })
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а .catch(registrationError => { console.log('SW registration failed: ', registrationError); });
┬а ┬а ┬а ┬а });
┬а ┬а }
┬а ┬а window.addEventListener('beforeinstallprompt', (e) => {┬а
┬а ┬а ┬а ┬а e.preventDefault();┬а
┬а ┬а ┬а ┬а deferredPrompt = e;
┬а ┬а ┬а ┬а document.getElementById('pwa-install-button').classList.remove('hidden');
┬а ┬а });
┬а ┬а window.promptPWAInstall = function() {
┬а ┬а ┬а ┬а if (deferredPrompt) {
┬а ┬а ┬а ┬а ┬а ┬а deferredPrompt.prompt();
┬а ┬а ┬а ┬а ┬а ┬а deferredPrompt.userChoice.then((choiceResult) => {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а if (choiceResult.outcome === 'accepted') { console.log('User accepted the install prompt'); }┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а else { console.log('User dismissed the install prompt'); }
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а deferredPrompt = null;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а document.getElementById('pwa-install-button').classList.add('hidden');┬а
┬а ┬а ┬а ┬а ┬а ┬а });
┬а ┬а ┬а ┬а }
┬а ┬а }


┬а ┬а // [Modal Logic] (р╣Ар╕Юр╕┤р╣Ир╕б Animation)
┬а ┬а window.showModal = function(id) {
┬а ┬а ┬а ┬а const modal = document.getElementById(id);
┬а ┬а ┬а ┬а const modalTarget = modal.querySelector('[data-modal-target]');

┬а ┬а ┬а ┬а modal.classList.remove('hidden');
┬а ┬а ┬а ┬а // Force reflow/repaint to ensure transition works
┬а ┬а ┬а ┬а modal.offsetHeight;┬а
┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а if(modalTarget) {
┬а ┬а ┬а ┬а ┬а ┬а modalTarget.classList.remove('scale-95', 'opacity-0');
┬а ┬а ┬а ┬а ┬а ┬а modalTarget.classList.add('scale-100', 'opacity-100');
┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а mainContent.classList.add('pointer-events-none', 'blur-sm'); // р╣Ар╕Юр╕┤р╣Ир╕бр╣Ар╕нр╕Яр╣Ар╕Яр╕Бр╕Хр╣Мр╣Ар╕Ър╕ер╕н
┬а ┬а ┬а ┬а lucide.createIcons();┬а
┬а ┬а ┬а ┬а if (id === 'install-qr-modal') {
┬а ┬а ┬а ┬а ┬а ┬а generateQRCodeForApp();
┬а ┬а ┬а ┬а }
┬а ┬а }
┬а ┬а window.hideModal = function(id) {
┬а ┬а ┬а ┬а const modal = document.getElementById(id);
┬а ┬а ┬а ┬а const modalTarget = modal.querySelector('[data-modal-target]');
┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а if(modalTarget) {
┬а ┬а ┬а ┬а ┬а ┬а ┬аmodalTarget.classList.add('scale-95', 'opacity-0');
┬а ┬а ┬а ┬а ┬а ┬а ┬аmodalTarget.classList.remove('scale-100', 'opacity-100');
┬а ┬а ┬а ┬а ┬а ┬а ┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а// Wait for the transition to finish before hiding (approx 300ms)
┬а ┬а ┬а ┬а ┬а ┬а ┬аsetTimeout(() => {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬аmodal.classList.add('hidden');
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬аmainContent.classList.remove('pointer-events-none', 'blur-sm');
┬а ┬а ┬а ┬а ┬а ┬а ┬а}, 300);

┬а ┬а ┬а ┬а } else {
┬а ┬а ┬а ┬а ┬а ┬а ┬аmodal.classList.add('hidden');
┬а ┬а ┬а ┬а ┬а ┬а ┬аmainContent.classList.remove('pointer-events-none', 'blur-sm');
┬а ┬а ┬а ┬а }
┬а ┬а }

┬а ┬а // [QR Code Logic] ЁЯМЯ р╣Бр╕Бр╣Йр╣Др╕В: р╕ер╕Ъ QR Code р╣Ар╕Фр╕┤р╕бр╕Бр╣Ир╕нр╕Щр╕кр╕гр╣Йр╕▓р╕Зр╣Гр╕лр╕бр╣И (р╕кр╕│р╕Др╕▒р╕Н!)
┬а ┬а function generateQRCodeForApp() {
┬а ┬а ┬а ┬а const url = window.location.href;┬а
┬а ┬а ┬а ┬а const qrcodeDisplay = document.getElementById('qrcode-display');
┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а // ЁЯМЯ р╣Бр╕Бр╣Йр╣Др╕В: р╕ер╣Йр╕▓р╕Зр╣Ар╕Щр╕╖р╣Йр╕нр╕лр╕▓р╣Ар╕Фр╕┤р╕бр╕Бр╣Ир╕нр╕Щр╕кр╕гр╣Йр╕▓р╕Зр╣Гр╕лр╕бр╣И
┬а ┬а ┬а ┬а qrcodeDisplay.innerHTML = '<div class="text-gray-500 text-sm">р╕Бр╕│р╕ер╕▒р╕Зр╕кр╕гр╣Йр╕▓р╕З QR Code...</div>';
┬а ┬а ┬а ┬а qrCodeInstance = null; // р╕гр╕╡р╣Ар╕Лр╣Зр╕Х instance
┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а // р╕лр╕Щр╣Ир╕зр╕Зр╣Ар╕зр╕ер╕▓р╣Ар╕ер╣Зр╕Бр╕Щр╣Йр╕нр╕вр╣Ар╕Юр╕╖р╣Ир╕нр╣Гр╕лр╣Й DOM р╣Вр╕лр╕ер╕Фр╣Ар╕кр╕гр╣Зр╕Ир╕Бр╣Ир╕нр╕Щр╕кр╕гр╣Йр╕▓р╕З QR Code
┬а ┬а ┬а ┬а setTimeout(() => {
┬а ┬а ┬а ┬а ┬а ┬а // р╕ер╣Йр╕▓р╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕б 'р╕Бр╕│р╕ер╕▒р╕Зр╕кр╕гр╣Йр╕▓р╕З...'
┬а ┬а ┬а ┬а ┬а ┬а qrcodeDisplay.innerHTML = '';
┬а ┬а ┬а ┬а ┬а ┬а qrCodeInstance = new QRCode(qrcodeDisplay, {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а text: url,
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а width: 200,
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а height: 200,
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а colorDark: "#1f2937",┬а
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а colorLight: "#ffffff",
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а correctLevel: QRCode.CorrectLevel.H
┬а ┬а ┬а ┬а ┬а ┬а });
┬а ┬а ┬а ┬а ┬а ┬а lucide.createIcons();
┬а ┬а ┬а ┬а }, 100);┬а
┬а ┬а }
┬а ┬а window.downloadQRCode = function() {
┬а ┬а ┬а ┬а const qrcodeDisplay = document.getElementById('qrcode-display');
┬а ┬а ┬а ┬а const canvas = qrcodeDisplay.querySelector('canvas');
┬а ┬а ┬а ┬а const img = qrcodeDisplay.querySelector('img');
┬а ┬а ┬а ┬а let dataUrl;
┬а ┬а ┬а ┬а if (canvas) { dataUrl = canvas.toDataURL("image/png"); }┬а
┬а ┬а ┬а ┬а else if (img) { dataUrl = img.src; }
┬а ┬а ┬а ┬а if (dataUrl) {
┬а ┬а ┬а ┬а ┬а ┬а const link = document.createElement('a');
┬а ┬а ┬а ┬а ┬а ┬а link.href = dataUrl;
┬а ┬а ┬а ┬а ┬а ┬а link.download = `srtc_vr_navigation_qrcode.png`;
┬а ┬а ┬а ┬а ┬а ┬а document.body.appendChild(link);
┬а ┬а ┬а ┬а ┬а ┬а link.click();
┬а ┬а ┬а ┬а ┬а ┬а document.body.removeChild(link);
┬а ┬а ┬а ┬а } else { console.error("QR Code image not found."); }
┬а ┬а }


┬а ┬а // [AR/VR Logic] ЁЯМЯ р╣Бр╕Бр╣Йр╣Др╕В: р╣Ар╕Юр╕┤р╣Ир╕бр╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щр╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╕Ир╕гр╕┤р╕З (р╕Ир╕│р╕ер╕нр╕З)
┬а ┬а async function startCamera() {
┬а ┬а ┬а ┬а console.log("Attempting to start camera...");
┬а ┬а ┬а ┬а errorMessage.classList.add('hidden');
┬а ┬а ┬а ┬а arMessage.classList.remove('hidden', 'bg-green-500');
┬а ┬а ┬а ┬а arMessage.classList.add('opacity-100', 'bg-yellow-400');
┬а ┬а ┬а ┬а arMessage.querySelector('p').textContent = 'р╕Бр╕│р╕ер╕▒р╕Зр╕гр╕нр╕Бр╕▓р╕гр╕нр╕Щр╕╕р╕Нр╕▓р╕Хр╕Бр╕ер╣Йр╕нр╕Зр╣Бр╕ер╕░р╕Хр╕│р╣Бр╕лр╕Щр╣Ир╕З...';

┬а ┬а ┬а ┬а try {
┬а ┬а ┬а ┬а ┬а ┬а // 1. р╕Вр╕нр╣Ар╕Вр╣Йр╕▓р╕Цр╕╢р╕Зр╕Бр╕ер╣Йр╕нр╕З (р╕Фр╣Йр╕▓р╕Щр╕лр╕ер╕▒р╕З)
┬а ┬а ┬а ┬а ┬а ┬а stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: 'environment' } });
┬а ┬а ┬а ┬а ┬а ┬а cameraFeed.srcObject = stream;
┬а ┬а ┬а ┬а ┬а ┬а console.log("Camera access granted.");

┬а ┬а ┬а ┬а ┬а ┬а // 2. р╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щр╕Бр╕▓р╕гр╕Щр╕│р╕Чр╕▓р╕З (Geolocation & Orientation)
┬а ┬а ┬а ┬а ┬а ┬а startNavigation();
┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а // р╣Бр╕кр╕Фр╕Зр╕Ьр╕ер╕кр╕│р╣Ар╕гр╣Зр╕Ир╕лр╕ер╕▒р╕Зр╕лр╕Щр╣Ир╕зр╕Зр╣Ар╕зр╕ер╕▓
┬а ┬а ┬а ┬а ┬а ┬а setTimeout(() => {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а arMessage.classList.remove('bg-yellow-400');
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а arMessage.classList.add('bg-green-500');
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а arMessage.querySelector('p').textContent = 'р╕Юр╕гр╣Йр╕нр╕бр╕Щр╕│р╕Чр╕▓р╕З! р╣Ар╕Фр╕┤р╕Щр╕Хр╕▓р╕бр╕ер╕╣р╕Бр╕ир╕г...';
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а setTimeout(() => {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а arMessage.classList.add('opacity-0');
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а arMessage.classList.add('hidden'); // р╕Лр╣Ир╕нр╕Щр╕лр╕ер╕▒р╕Зр╕Ир╕▓р╕Бр╕Ир╕▓р╕Зр╕лр╕▓р╕в
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а }, 3000);
┬а ┬а ┬а ┬а ┬а ┬а }, 1500); // р╕лр╕Щр╣Ир╕зр╕Зр╣Ар╕зр╕ер╕▓р╣Гр╕лр╣Йр╕Фр╕╣р╕кр╕бр╕Ир╕гр╕┤р╕З
┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а } catch (err) {
┬а ┬а ┬а ┬а ┬а ┬а console.error("Error accessing camera/media:", err);
┬а ┬а ┬а ┬а ┬а ┬а stopCamera();
┬а ┬а ┬а ┬а ┬а ┬а errorMessage.classList.remove('hidden');
┬а ┬а ┬а ┬а ┬а ┬а arMessage.classList.add('hidden');
┬а ┬а ┬а ┬а ┬а ┬а return false;
┬а ┬а ┬а ┬а }
┬а ┬а ┬а ┬а return true;
┬а ┬а }

┬а ┬а function stopCamera() {
┬а ┬а ┬а ┬а if (stream) {
┬а ┬а ┬а ┬а ┬а ┬а stream.getTracks().forEach(track => track.stop());
┬а ┬а ┬а ┬а ┬а ┬а stream = null;
┬а ┬а ┬а ┬а }
┬а ┬а ┬а ┬а stopNavigation();
┬а ┬а }

┬а ┬а // ЁЯМЯ р╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щр╕Ир╕│р╕ер╕нр╕Зр╕Бр╕▓р╕гр╕Щр╕│р╕Чр╕▓р╕З AR
┬а ┬а function startNavigation() {
┬а ┬а ┬а ┬а // р╕Хр╕│р╣Бр╕лр╕Щр╣Ир╕Зр╣Ар╕Ыр╣Йр╕▓р╕лр╕бр╕▓р╕вр╕кр╕бр╕бр╕Хр╕┤ (р╕лр╣Йр╕нр╕З 305)
┬а ┬а ┬а ┬а const targetLatitude = 10.0001; // р╕кр╕бр╕бр╕Хр╕┤
┬а ┬а ┬а ┬а const targetLongitude = 99.0001; // р╕кр╕бр╕бр╕Хр╕┤

┬а ┬а ┬а ┬а // 1. р╕Бр╕▓р╕гр╕Щр╕│р╕Чр╕▓р╕З (р╕Ир╕│р╕ер╕нр╕Зр╕Бр╕▓р╕гр╣Гр╕Кр╣Й Geolocation API)
┬а ┬а ┬а ┬а if (navigator.geolocation) {
┬а ┬а ┬а ┬а ┬а ┬а // р╣Гр╕Щр╣Вр╕Др╣Йр╕Фр╕Ир╕гр╕┤р╕Зр╕Ир╕░р╕бр╕╡р╕Бр╕▓р╕гр╣Гр╕Кр╣Й navigator.geolocation.watchPosition() р╣Ар╕Юр╕╖р╣Ир╕нр╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕Хр╕│р╣Бр╕лр╕Щр╣Ир╕З
┬а ┬а ┬а ┬а ┬а ┬а // р╣Ар╕гр╕▓р╕Ир╕░р╣Гр╕Кр╣Йр╣Вр╕Др╣Йр╕Фр╕Ир╕│р╕ер╕нр╕Зр╣Ар╕Юр╕╖р╣Ир╕нр╣Гр╕лр╣Йр╣Бр╕кр╕Фр╕Зр╕Ьр╕е "р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╣Др╕Фр╣Йр╕Ир╕гр╕┤р╕З"
┬а ┬а ┬а ┬а ┬а ┬а console.log("Geolocation is supported. Mocking navigation.");
┬а ┬а ┬а ┬а ┬а ┬а // р╣Гр╕Щр╣Вр╕ер╕Бр╕Ир╕гр╕┤р╕Зр╕Ир╕░р╕Хр╣Йр╕нр╕Зр╕Др╕│р╕Щр╕зр╕У Bearing (р╕бр╕╕р╕бр╣Др╕Ыр╕вр╕▒р╕Зр╣Ар╕Ыр╣Йр╕▓р╕лр╕бр╕▓р╕в) р╕Ир╕▓р╕Бр╕Хр╕│р╣Бр╕лр╕Щр╣Ир╕Зр╕Ыр╕▒р╕Ир╕Ир╕╕р╕Ър╕▒р╕Щ
┬а ┬а ┬а ┬а ┬а ┬а // р╣Бр╕ер╕░р╕Др╕│р╕Щр╕зр╕Ур╕гр╕░р╕вр╕░р╕Чр╕▓р╕З
┬а ┬а ┬а ┬а ┬а ┬а // ... (р╣Вр╕Др╣Йр╕Фр╕Др╕│р╕Щр╕зр╕Ур╕Ир╕гр╕┤р╕З) ...
┬а ┬а ┬а ┬а ┬а ┬а // document.getElementById('ar-destination').textContent = 'р╕бр╕╕р╣Ир╕Зр╕лр╕Щр╣Йр╕▓р╣Др╕Ыр╕вр╕▒р╕З: р╕лр╣Йр╕нр╕З 305 (р╕гр╕░р╕вр╕░р╕Чр╕▓р╕З [р╕гр╕░р╕вр╕░р╕Чр╕▓р╕Зр╕Ир╕гр╕┤р╕З] р╕б.)';

┬а ┬а ┬а ┬а ┬а ┬а // р╕Ир╕│р╕ер╕нр╕Зр╕гр╕░р╕вр╕░р╕Чр╕▓р╕Зр╣Гр╕лр╣Йр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕З
┬а ┬а ┬а ┬а ┬а ┬а let distance = 15;
┬а ┬а ┬а ┬а ┬а ┬а const distanceInterval = setInterval(() => {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а distance = Math.max(0, distance - Math.random() * 0.5); // р╕ер╕Фр╕ер╕Зр╣Ар╕гр╕╖р╣Ир╕нр╕вр╣Ж
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а const distanceText = distance.toFixed(1);
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а document.getElementById('ar-destination').textContent = `р╕бр╕╕р╣Ир╕Зр╕лр╕Щр╣Йр╕▓р╣Др╕Ыр╕вр╕▒р╕З: р╕лр╣Йр╕нр╕З 305 (р╕гр╕░р╕вр╕░р╕Чр╕▓р╕З ${distanceText} р╕б.)`;
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а if (distance <= 0) {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а clearInterval(distanceInterval);
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а document.getElementById('ar-destination').textContent = 'р╕Цр╕╢р╕Зр╕Чр╕╡р╣Ир╕лр╕бр╕▓р╕вр╣Бр╕ер╣Йр╕з! р╕лр╣Йр╕нр╕З 305';
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а arArrow.style.transform = 'scale(2) rotate(0deg)'; // Arrow р╣Гр╕лр╕Нр╣Ир╕Вр╕╢р╣Йр╕Щ
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а arArrow.classList.remove('animate-bounce');
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а arArrow.classList.add('text-pink-500');
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а }
┬а ┬а ┬а ┬а ┬а ┬а }, 1000);

┬а ┬а ┬а ┬а ┬а ┬а vrContainer.dataset.distanceInterval = distanceInterval; // р╣Ар╕Бр╣Зр╕Ъ interval ID р╣Др╕зр╣Й
┬а ┬а ┬а ┬а } else {
┬а ┬а ┬а ┬а ┬а ┬а console.warn("Geolocation not supported for real navigation.");
┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а // 2. р╣Ар╕Вр╣Зр╕бр╕Чр╕┤р╕и (р╕Ир╕│р╕ер╕нр╕Зр╕Бр╕▓р╕гр╣Гр╕Кр╣Й Device Orientation API)
┬а ┬а ┬а ┬а orientationHandler = function(event) {
┬а ┬а ┬а ┬а ┬а ┬а let compassHeading;

┬а ┬а ┬а ┬а ┬а ┬а // р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╣Ар╕Ър╕гр╕▓р╕зр╣Мр╣Ар╕Лр╕нр╕гр╣Мр╕кр╣Ир╕З `webkitCompassHeading` (iOS Safari) р╕лр╕гр╕╖р╕н `alpha` (Android/р╕нр╕╖р╣Ир╕Щр╣Ж)
┬а ┬а ┬а ┬а ┬а ┬а if (event.webkitCompassHeading !== undefined) {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а compassHeading = event.webkitCompassHeading;
┬а ┬а ┬а ┬а ┬а ┬а } else if (event.alpha !== null) {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а // р╕кр╕│р╕лр╕гр╕▒р╕Ъ Android, alpha р╕Др╕╖р╕нр╕бр╕╕р╕бр╣Ар╕Чр╕╡р╕вр╕Ър╕Бр╕▒р╕Ър╣Вр╕ер╕Б
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а compassHeading = 360 - event.alpha;
┬а ┬а ┬а ┬а ┬а ┬а } else {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а return; // р╣Др╕бр╣Ир╕гр╕нр╕Зр╕гр╕▒р╕Ъ
┬а ┬а ┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а ┬а ┬а // Bearing To Target (р╕кр╕бр╕бр╕Хр╕┤: 45 р╕нр╕Зр╕ир╕▓)
┬а ┬а ┬а ┬а ┬а ┬а const targetBearing = 45;┬а
┬а ┬а ┬а ┬а ┬а ┬а┬а
┬а ┬а ┬а ┬а ┬а ┬а // р╕Др╕│р╕Щр╕зр╕Ур╕Др╕зр╕▓р╕бр╣Бр╕Хр╕Бр╕Хр╣Ир╕▓р╕Зр╕гр╕░р╕лр╕зр╣Ир╕▓р╕Зр╕Чр╕┤р╕ир╕Чр╕╡р╣Ир╕лр╕▒р╕Щр╕лр╕Щр╣Йр╕▓ (Compass) р╕Бр╕▒р╕Ър╕Чр╕┤р╕ир╕Вр╕нр╕Зр╣Ар╕Ыр╣Йр╕▓р╕лр╕бр╕▓р╕в (Bearing)
┬а ┬а ┬а ┬а ┬а ┬а // 'bearing' р╕Др╕╖р╕нр╕Чр╕┤р╕ир╕Чр╕▓р╕Зр╕Чр╕╡р╣Ир╣Ар╕гр╕▓р╕Хр╣Йр╕нр╕Зр╕лр╕▒р╕Щр╣Др╕Ы (р╕Чр╕┤р╕ир╣Ар╕лр╕Щр╕╖р╕н: 0)
┬а ┬а ┬а ┬а ┬а ┬а // 'compassHeading' р╕Др╕╖р╕нр╕Чр╕┤р╕ир╕Чр╕▓р╕Зр╕Чр╕╡р╣Ир╣Вр╕Чр╕гр╕ир╕▒р╕Юр╕Чр╣Мр╕лр╕▒р╕Щр╕лр╕Щр╣Йр╕▓р╣Др╕Ы
┬а ┬а ┬а ┬а ┬а ┬а // 'correction' р╕Др╕╖р╕нр╕бр╕╕р╕бр╕Чр╕╡р╣Ир╕ер╕╣р╕Бр╕ир╕гр╕Хр╣Йр╕нр╕Зр╕лр╕бр╕╕р╕Щ
┬а ┬а ┬а ┬а ┬а ┬а let rotation = targetBearing - compassHeading;

┬а ┬а ┬а ┬а ┬а ┬а // р╕Ыр╕гр╕▒р╕Ър╕бр╕╕р╕бр╣Гр╕лр╣Йр╕нр╕вр╕╣р╣Ир╣Гр╕Щр╕Кр╣Ир╕зр╕З 0-360
┬а ┬а ┬а ┬а ┬а ┬а rotation = (rotation + 360) % 360; 

┬а ┬а ┬а ┬а ┬а ┬а // р╕лр╕бр╕╕р╕Щр╕ер╕╣р╕Бр╕ир╕г (р╕Хр╣Йр╕нр╕Зр╕лр╕бр╕╕р╕Щр╕Бр╕ер╕▒р╕Ър╕Чр╕┤р╕ир╕Чр╕▓р╕З: -rotation)
┬а ┬а ┬а ┬а ┬а ┬а arArrow.style.transform = `rotate(${-rotation}deg)`;
┬а ┬а ┬а ┬а };

┬а ┬а ┬а ┬а if ('DeviceOrientationEvent' in window) {
┬а ┬а ┬а ┬а ┬а ┬а // р╕Вр╕нр╕нр╕Щр╕╕р╕Нр╕▓р╕Хр╣Ар╕Вр╣Йр╕▓р╕Цр╕╢р╕З Device Orientation (р╕кр╕│р╕лр╕гр╕▒р╕Ъ iOS 13+)
┬а ┬а ┬а ┬а ┬а ┬а if (typeof DeviceOrientationEvent.requestPermission === 'function') {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а DeviceOrientationEvent.requestPermission()
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а .then(permissionState => {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а if (permissionState === 'granted') {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а window.addEventListener('deviceorientation', orientationHandler);
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а console.log("Device orientation granted.");
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а } else {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а console.warn("Device orientation permission denied.");
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а }
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а })
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а .catch(console.error);
┬а ┬а ┬а ┬а ┬а ┬а } else {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а // р╕кр╕│р╕лр╕гр╕▒р╕Ъ Android/р╣Ар╕Ър╕гр╕▓р╕зр╣Мр╣Ар╕Лр╕нр╕гр╣Мр╣Ар╕Бр╣Ир╕▓
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а window.addEventListener('deviceorientation', orientationHandler);
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а console.log("Device orientation started (fallback).");
┬а ┬а ┬а ┬а ┬а ┬а }
┬а ┬а ┬а ┬а } else {
┬а ┬а ┬а ┬а ┬а ┬а console.warn("Device orientation not supported.");
┬а ┬а ┬а ┬а }

┬а ┬а }

┬а ┬а function stopNavigation() {
┬а ┬а ┬а ┬а // р╕лр╕вр╕╕р╕Ф Geolocation (р╕Цр╣Йр╕▓р╕бр╕╡)
┬а ┬а ┬а ┬а if (vrContainer.dataset.distanceInterval) {
┬а ┬а ┬а ┬а ┬а ┬а clearInterval(parseInt(vrContainer.dataset.distanceInterval));
┬а ┬а ┬а ┬а ┬а ┬а delete vrContainer.dataset.distanceInterval;
┬а ┬а ┬а ┬а }

┬а ┬а ┬а ┬а // р╕лр╕вр╕╕р╕Ф Device Orientation (р╕Цр╣Йр╕▓р╕бр╕╡)
┬а ┬а ┬а ┬а if (orientationHandler) {
┬а ┬а ┬а ┬а ┬а ┬а window.removeEventListener('deviceorientation', orientationHandler);
┬а ┬а ┬а ┬а ┬а ┬а orientationHandler = null;
┬а ┬а ┬а ┬а ┬а ┬а console.log("Device orientation stopped.");
┬а ┬а ┬а ┬а }
┬а ┬а }


┬а ┬а // ЁЯМЯ р╕Яр╕▒р╕Зр╕Бр╣Мр╕Кр╕▒р╕Щр╕лр╕ер╕▒р╕Бр╕кр╕│р╕лр╕гр╕▒р╕Ър╕кр╕ер╕▒р╕Ър╣Вр╕лр╕бр╕Ф VR/AR
┬а ┬а window.toggleVRMode = async function() {
┬а ┬а ┬а ┬а if (vrContainer.classList.contains('hidden')) {
┬а ┬а ┬а ┬а ┬а ┬а // р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╣Вр╕лр╕бр╕Ф VR/AR
┬а ┬а ┬а ┬а ┬а ┬а vrContainer.classList.remove('hidden');
┬а ┬а ┬а ┬а ┬а ┬а mainContent.classList.add('hidden');
┬а ┬а ┬а ┬а ┬а ┬а lucide.createIcons(); // р╕кр╕гр╣Йр╕▓р╕З icon р╣Гр╕лр╕бр╣И

┬а ┬а ┬а ┬а ┬а ┬а // р╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щр╕Бр╕ер╣Йр╕нр╕Зр╣Бр╕ер╕░р╕Бр╕▓р╕гр╕Щр╕│р╕Чр╕▓р╕З
┬а ┬а ┬а ┬а ┬а ┬а const success = await startCamera();
┬а ┬а ┬а ┬а ┬а ┬а if (!success) {
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а // р╕Цр╣Йр╕▓р╣Ар╕Ыр╕┤р╕Фр╕Бр╕ер╣Йр╕нр╕Зр╣Др╕бр╣Ир╣Др╕Фр╣Й р╣Гр╕лр╣Йр╕нр╕нр╕Бр╕Ир╕▓р╕Бр╣Вр╕лр╕бр╕Ф VR/AR
┬а ┬а ┬а ┬а ┬а ┬а ┬а ┬а toggleVRMode();
┬а ┬а ┬а ┬а ┬а ┬а }
┬а ┬а ┬а ┬а } else {
┬а ┬а ┬а ┬а ┬а ┬а // р╕нр╕нр╕Бр╕Ир╕▓р╕Бр╣Вр╕лр╕бр╕Ф VR/AR
┬а ┬а ┬а ┬а ┬а ┬а stopCamera();
┬а ┬а ┬а ┬а ┬а ┬а vrContainer.classList.add('hidden');
┬а ┬а ┬а ┬а ┬а ┬а mainContent.classList.remove('hidden');
┬а ┬а ┬а ┬а ┬а ┬а arArrow.style.transform = 'rotate(0deg)'; // р╕гр╕╡р╣Ар╕Лр╣Зр╕Хр╕ер╕╣р╕Бр╕ир╕г
┬а ┬а ┬а ┬а ┬а ┬а arArrow.classList.add('animate-bounce');
┬а ┬а ┬а ┬а ┬а ┬а arArrow.classList.remove('text-pink-500');
┬а ┬а ┬а ┬а ┬а ┬а lucide.createIcons();
┬а ┬а ┬а ┬а }
┬а ┬а }
┬а ┬а┬а
┬а ┬а window.hideErrorAndVR = function() {
┬а ┬а ┬а ┬а errorMessage.classList.add('hidden');
┬а ┬а ┬а ┬а toggleVRMode(); // р╕Ыр╕┤р╕Ф VR/AR container
┬а ┬а }

┬а ┬а // ----------------------- INITIALIZATION -----------------------
┬а ┬а document.addEventListener('DOMContentLoaded', () => {
┬а ┬а ┬а ┬а renderBuildingList(); // р╕кр╕гр╣Йр╕▓р╕Зр╕гр╕▓р╕вр╕Бр╕▓р╕гр╕Хр╕╢р╕Б
┬а ┬а ┬а ┬а showSection('home-section'); // р╣Бр╕кр╕Фр╕Зр╕лр╕Щр╣Йр╕▓р╣Бр╕гр╕Бр╣Ар╕Ыр╣Зр╕Щр╕Др╣Ир╕▓р╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щ
┬а ┬а ┬а ┬а lucide.createIcons();
┬а ┬а });

</script>

</body>
</html>





